<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="keywords" content="没事儿,tong-h,Tong-H,tong-h blog"><meta name="descriptioon" content="personal blog by Tong-H"><meta name="renderer" content="wekit"><link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/css/public.css"><link rel="stylesheet" href="/css/reset.css"><link rel="stylesheet" href="/css/iconfont.css"><title>notes_js [ Tong-H ]</title><link rel="stylesheet" href="/css/partial/footer.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"><link rel="stylesheet" href="/css/partial/sidebar.css"><link rel="stylesheet" href="/css/post.css"><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><meta name="generator" content="Hexo 5.4.0"></head><body class="scroll"><link rel="stylesheet" href="/css/partial/header.css"><div class="header scroll"><div class="maxwidth"><div class="nav"><a id="artlist" href="/404"><i class="iconfont icon404"></i><span class="headhid">&nbsp;404</span></a><a id="artlist" href="/archives"><i class="iconfont iconarchives"></i><span class="headhid">&nbsp;Archives</span></a><a id="artlist" href="/link"><i class="iconfont iconlink"></i><span class="headhid">&nbsp;Link</span></a><a id="artlist" href="/about"><i class="iconfont iconabout"></i><span class="headhid">&nbsp;About</span></a></div><div class="search">TONG-H</div></div></div><div class="main"> <div class="maxwidth"><link rel="stylesheet" href="/css/partial/sidebar.css"><div class="scroll" id="sidebar"><div class="social"><a href="/archives" title="Home"><i class="iconfont iconHome"></i></a><a href="mailto:tongt0232@gmail.com" title="E-Mail"><i class="iconfont iconweibiaoti554"></i></a><a target="_blank" rel="noopener" href="https://github.com/tong-h" title="GitHub"><i class="iconfont iconGitHub"></i></a><a target="_blank" rel="noopener" href="https://juejin.cn/user/1204720474809741" title="juejin"><img src="/images/juejinicon-sidebar.png"></a><a target="_blank" rel="noopener" href="https://www.jianshu.com/u/20de04cc53de" title="jianshu"><img src="/images/jianicon-sidebar.png"></a></div><div class="structure category-list"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Micro-Frontend"><span class="toc-number">1.</span> <span class="toc-text">Micro-Frontend</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#the-principles-of-component-design"><span class="toc-number">2.</span> <span class="toc-text">the principles of component design</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#performance-optimization"><span class="toc-number">3.</span> <span class="toc-text">performance optimization</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#browser-rendering"><span class="toc-number">4.</span> <span class="toc-text">browser rendering</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#the-rendering-process"><span class="toc-number">4.1.</span> <span class="toc-text">the rendering process</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reflow-and-repaint"><span class="toc-number">4.2.</span> <span class="toc-text">reflow and repaint</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SVG"><span class="toc-number">5.</span> <span class="toc-text">SVG</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#properties"><span class="toc-number">5.1.</span> <span class="toc-text">properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#path"><span class="toc-number">5.2.</span> <span class="toc-text">path</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#filter"><span class="toc-number">5.3.</span> <span class="toc-text">filter</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CSS"><span class="toc-number">6.</span> <span class="toc-text">CSS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#stacking-context"><span class="toc-number">6.1.</span> <span class="toc-text">stacking context</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#selector"><span class="toc-number">6.2.</span> <span class="toc-text">selector</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#box-module"><span class="toc-number">6.3.</span> <span class="toc-text">box module</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#layouts"><span class="toc-number">6.4.</span> <span class="toc-text">layouts</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#flexible-self-adoption"><span class="toc-number">6.4.1.</span> <span class="toc-text">flexible, self-adoption</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#centered-and-vertically-aligned-layout"><span class="toc-number">6.4.2.</span> <span class="toc-text">centered and vertically aligned layout</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#others"><span class="toc-number">6.5.</span> <span class="toc-text">others</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Storage"><span class="toc-number">7.</span> <span class="toc-text">Storage</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RegExp-regular-expression"><span class="toc-number">8.</span> <span class="toc-text">RegExp (regular expression)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#modifier"><span class="toc-number">8.1.</span> <span class="toc-text">modifier</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Properties"><span class="toc-number">8.2.</span> <span class="toc-text">Properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#symbols"><span class="toc-number">8.3.</span> <span class="toc-text">symbols</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#examples"><span class="toc-number">8.4.</span> <span class="toc-text">examples</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Javascript"><span class="toc-number">9.</span> <span class="toc-text">Javascript</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#symbol-and-keyword"><span class="toc-number">9.1.</span> <span class="toc-text">symbol and keyword</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#variable-declaration"><span class="toc-number">9.2.</span> <span class="toc-text">variable declaration</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#es6-shorthand"><span class="toc-number">9.2.1.</span> <span class="toc-text">es6 shorthand</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#iterate"><span class="toc-number">9.2.2.</span> <span class="toc-text">iterate</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Instance%E2%80%99s-Properties"><span class="toc-number">9.2.3.</span> <span class="toc-text">Instance’s Properties</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Object%E2%80%99s-Properties"><span class="toc-number">9.2.4.</span> <span class="toc-text">Object’s Properties</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JSON"><span class="toc-number">9.2.5.</span> <span class="toc-text">JSON</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Array"><span class="toc-number">9.3.</span> <span class="toc-text">Array</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#number-precision-issues"><span class="toc-number">9.4.</span> <span class="toc-text">number precision issues</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scope"><span class="toc-number">9.5.</span> <span class="toc-text">scope</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#scope-types"><span class="toc-number">9.5.1.</span> <span class="toc-text">scope types</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#scope-chain"><span class="toc-number">9.5.2.</span> <span class="toc-text">scope chain</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Memory-Management"><span class="toc-number">9.6.</span> <span class="toc-text">Memory Management</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Garbage-Collection"><span class="toc-number">9.6.1.</span> <span class="toc-text">Garbage-Collection</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#memory-leak"><span class="toc-number">9.6.2.</span> <span class="toc-text">memory leak</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#closure"><span class="toc-number">9.7.</span> <span class="toc-text">closure</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#advantages"><span class="toc-number">9.7.1.</span> <span class="toc-text">advantages</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Stale-closure"><span class="toc-number">9.7.2.</span> <span class="toc-text">Stale closure</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#prototype"><span class="toc-number">9.8.</span> <span class="toc-text">prototype</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#property-chain"><span class="toc-number">9.8.1.</span> <span class="toc-text">property chain</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#diff-between-constructor-and-normal-function"><span class="toc-number">9.8.2.</span> <span class="toc-text">diff between constructor and normal function</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Inheritance"><span class="toc-number">9.8.3.</span> <span class="toc-text">Inheritance</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#prototype-delegation"><span class="toc-number">9.8.4.</span> <span class="toc-text">prototype delegation</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#deep-and-shallow-copy"><span class="toc-number">9.9.</span> <span class="toc-text">deep and shallow copy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#event-loop"><span class="toc-number">9.10.</span> <span class="toc-text">event loop</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#debounce-and-throttle"><span class="toc-number">9.11.</span> <span class="toc-text">debounce and throttle</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#breakpoint-resume"><span class="toc-number">9.12.</span> <span class="toc-text">breakpoint resume</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#messageChannel"><span class="toc-number">9.13.</span> <span class="toc-text">messageChannel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#generator"><span class="toc-number">9.14.</span> <span class="toc-text">generator</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue-vs-react"><span class="toc-number">9.15.</span> <span class="toc-text">vue vs react</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#architectural-patterns"><span class="toc-number">9.16.</span> <span class="toc-text">architectural patterns</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#MVC"><span class="toc-number">9.16.1.</span> <span class="toc-text">MVC</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MVVM"><span class="toc-number">9.16.2.</span> <span class="toc-text">MVVM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#active-view-and-passive-view"><span class="toc-number">9.16.3.</span> <span class="toc-text">active view and passive view</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Typescript"><span class="toc-number">10.</span> <span class="toc-text">Typescript</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#references"><span class="toc-number">10.1.</span> <span class="toc-text">references</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#diff-with-js"><span class="toc-number">10.2.</span> <span class="toc-text">diff with js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#type-judgement"><span class="toc-number">10.3.</span> <span class="toc-text">type judgement</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Diff-of-null-and-undefined"><span class="toc-number">10.4.</span> <span class="toc-text">Diff of null and undefined</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Diff-of-ts-and-d-ts"><span class="toc-number">10.5.</span> <span class="toc-text">Diff of .ts and .d.ts</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Diff-of-type-and-interface"><span class="toc-number">10.6.</span> <span class="toc-text">Diff of type and interface</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#features"><span class="toc-number">10.7.</span> <span class="toc-text">features</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#useful-tricks"><span class="toc-number">10.8.</span> <span class="toc-text">useful tricks</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React"><span class="toc-number">11.</span> <span class="toc-text">React</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#life-cycle"><span class="toc-number">11.1.</span> <span class="toc-text">life cycle</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#change-view"><span class="toc-number">11.2.</span> <span class="toc-text">change view</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#components-conversation"><span class="toc-number">11.3.</span> <span class="toc-text">components conversation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSX"><span class="toc-number">11.4.</span> <span class="toc-text">JSX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#high-order-component"><span class="toc-number">11.5.</span> <span class="toc-text">high order component</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Render-Props"><span class="toc-number">11.6.</span> <span class="toc-text">Render Props</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ref"><span class="toc-number">11.7.</span> <span class="toc-text">ref</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#callback-ref"><span class="toc-number">11.7.1.</span> <span class="toc-text">callback ref</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ref-forwarding"><span class="toc-number">11.7.2.</span> <span class="toc-text">ref forwarding</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hooks"><span class="toc-number">11.8.</span> <span class="toc-text">hooks</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#difference-between-class-and-hook"><span class="toc-number">11.9.</span> <span class="toc-text">difference between class and hook</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lazy-loading"><span class="toc-number">11.10.</span> <span class="toc-text">lazy loading</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#key"><span class="toc-number">11.10.1.</span> <span class="toc-text">key</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shouldComponentUpdate-VS-pureComponent"><span class="toc-number">11.11.</span> <span class="toc-text">shouldComponentUpdate VS pureComponent</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fiber"><span class="toc-number">11.12.</span> <span class="toc-text">fiber</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#controlled-and-uncontrolled"><span class="toc-number">11.13.</span> <span class="toc-text">controlled and uncontrolled</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#automatic-batching"><span class="toc-number">11.14.</span> <span class="toc-text">automatic batching</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Built-in-React-Components"><span class="toc-number">11.15.</span> <span class="toc-text">Built-in React Components</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Fragment"><span class="toc-number">11.15.1.</span> <span class="toc-text">Fragment</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Profiler"><span class="toc-number">11.15.2.</span> <span class="toc-text">Profiler</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Suspense-dynamic-import-lazy-loading"><span class="toc-number">11.15.3.</span> <span class="toc-text">Suspense + dynamic import + lazy loading</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#StrictMode"><span class="toc-number">11.15.4.</span> <span class="toc-text">StrictMode</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#others-1"><span class="toc-number">11.16.</span> <span class="toc-text">others</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redux"><span class="toc-number">11.17.</span> <span class="toc-text">redux</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#concept"><span class="toc-number">11.17.1.</span> <span class="toc-text">concept</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Redux-Methods"><span class="toc-number">11.17.2.</span> <span class="toc-text">Redux Methods</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redux-toolkit"><span class="toc-number">11.18.</span> <span class="toc-text">redux-toolkit</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue"><span class="toc-number">12.</span> <span class="toc-text">Vue</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#web3"><span class="toc-number">13.</span> <span class="toc-text">web3</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#webpack"><span class="toc-number">14.</span> <span class="toc-text">webpack</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#building-process"><span class="toc-number">14.1.</span> <span class="toc-text">building process</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#optimization"><span class="toc-number">14.2.</span> <span class="toc-text">optimization</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#boost-build-time"><span class="toc-number">14.3.</span> <span class="toc-text">boost build time</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tree-shaking"><span class="toc-number">14.4.</span> <span class="toc-text">tree shaking</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#module-federation"><span class="toc-number">14.5.</span> <span class="toc-text">module federation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP"><span class="toc-number">15.</span> <span class="toc-text">HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CORS"><span class="toc-number">15.1.</span> <span class="toc-text">CORS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http-versions"><span class="toc-number">15.2.</span> <span class="toc-text">http versions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#methods"><span class="toc-number">15.3.</span> <span class="toc-text">methods</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#headers"><span class="toc-number">15.4.</span> <span class="toc-text">headers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http-cache"><span class="toc-number">15.5.</span> <span class="toc-text">http cache</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#code"><span class="toc-number">15.6.</span> <span class="toc-text">code</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#https-optimization"><span class="toc-number">15.7.</span> <span class="toc-text">https optimization</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#real-time-communication"><span class="toc-number">16.</span> <span class="toc-text">real-time communication</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SSE"><span class="toc-number">16.1.</span> <span class="toc-text">SSE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Websocket"><span class="toc-number">16.2.</span> <span class="toc-text">Websocket</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#long-polling"><span class="toc-number">17.</span> <span class="toc-text">long-polling</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NPM"><span class="toc-number">18.</span> <span class="toc-text">NPM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vscode"><span class="toc-number">19.</span> <span class="toc-text">Vscode</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#search-patterns"><span class="toc-number">20.</span> <span class="toc-text">search patterns</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#terms"><span class="toc-number">21.</span> <span class="toc-text">terms</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#records"><span class="toc-number">22.</span> <span class="toc-text">records</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2023-7-19"><span class="toc-number">22.1.</span> <span class="toc-text">2023&#x2F;7&#x2F;19</span></a></li></ol></li></ol></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/NOTES/">NOTES</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OTHER/">OTHER</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PYTHON/">PYTHON</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WEB/">WEB</a><span class="category-list-count">44</span></li></ul><div class="tags"><a href="/tags/Cache/" style="font-size: 15px; color: #ec9d00">Cache</a> <a href="/tags/ECharts/" style="font-size: 12px; color: #ffac00">ECharts</a> <a href="/tags/Electron/" style="font-size: 12px; color: #ffac00">Electron</a> <a href="/tags/Git/" style="font-size: 12px; color: #ffac00">Git</a> <a href="/tags/JS-%E6%8B%BE%E9%81%97/" style="font-size: 12px; color: #ffac00">JS 拾遗</a> <a href="/tags/JSON/" style="font-size: 12px; color: #ffac00">JSON</a> <a href="/tags/Linux/" style="font-size: 12px; color: #ffac00">Linux</a> <a href="/tags/OTHER/" style="font-size: 12px; color: #ffac00">OTHER</a> <a href="/tags/Svg/" style="font-size: 12px; color: #ffac00">Svg</a> <a href="/tags/angular/" style="font-size: 15px; color: #ec9d00">angular</a> <a href="/tags/canvas/" style="font-size: 21px; color: #c77e00">canvas</a> <a href="/tags/cordova/" style="font-size: 21px; color: #c77e00">cordova</a> <a href="/tags/domain/" style="font-size: 12px; color: #ffac00">domain</a> <a href="/tags/ffmpeg/" style="font-size: 12px; color: #ffac00">ffmpeg</a> <a href="/tags/gitment/" style="font-size: 12px; color: #ffac00">gitment</a> <a href="/tags/hexo/" style="font-size: 18px; color: #da8d00">hexo</a> <a href="/tags/http/" style="font-size: 12px; color: #ffac00">http</a> <a href="/tags/markdown/" style="font-size: 12px; color: #ffac00">markdown</a> <a href="/tags/mpvue/" style="font-size: 12px; color: #ffac00">mpvue</a> <a href="/tags/mysql/" style="font-size: 12px; color: #ffac00">mysql</a> <a href="/tags/nginx/" style="font-size: 12px; color: #ffac00">nginx</a> <a href="/tags/nodejs/" style="font-size: 12px; color: #ffac00">nodejs</a> <a href="/tags/npm/" style="font-size: 12px; color: #ffac00">npm</a> <a href="/tags/python/" style="font-size: 12px; color: #ffac00">python</a> <a href="/tags/server/" style="font-size: 12px; color: #ffac00">server</a> <a href="/tags/translation/" style="font-size: 24px; color: #b46e00">translation</a> <a href="/tags/typescript/" style="font-size: 12px; color: #ffac00">typescript</a> <a href="/tags/vue/" style="font-size: 12px; color: #ffac00">vue</a> <a href="/tags/yarn/" style="font-size: 12px; color: #ffac00">yarn</a> <a href="/tags/%E5%8E%9F%E5%9E%8B%E9%93%BE/" style="font-size: 12px; color: #ffac00">原型链</a> <a href="/tags/%E5%9B%BD%E9%99%85%E5%8C%96/" style="font-size: 12px; color: #ffac00">国际化</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/" style="font-size: 15px; color: #ec9d00">网络爬虫</a> <a href="/tags/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%BB%9A%E5%8A%A8%E6%9D%A1/" style="font-size: 12px; color: #ffac00">自定义滚动条</a> <a href="/tags/%E8%B7%A8%E5%9F%9F/" style="font-size: 12px; color: #ffac00">跨域</a></div></div><div class="post rightside"><div class="artititle">notes_js</div><div class="info"><i class="iconfont iconwenzi" title="字数">16.4k</i><i class="iconfont iconshijian" title="阅读时长">100</i><i class="iconfont iconarchives" title="文章分类"><span>NOTES</span></i><i class="iconfont iconshijian"><span title="文章发布时间">2021-11-17</span></i></div><div class="postDetail"><style>
  html body strong {
    color: #0a95ff ;
    background: rgb(10 149 255 / 10%);
    padding: 0px 2px;
    border-radius: 3px
  }
  html body em {
    color: red !important;
    background: yellow
  }
  .postDetail li {
    list-style: circle !important;
  }
</style>

<h2 id="Micro-Frontend"><a href="#Micro-Frontend" class="headerlink" title="Micro-Frontend"></a>Micro-Frontend</h2><blockquote>
<p>an architectural approach for building web applications by decomposing them into smaller, independently deployable and maintainable frontend modules or components. Each sub-application repo is independent and does not share its own state during runtime.</p>
</blockquote>
<ul>
<li>to decouple complex application.</li>
<li>allow teams to work on different parts of an application independently</li>
<li>allow to gradually replace or rewrite old part of an project, and friendly to grey deploy</li>
<li>integrating third-party components or services</li>
</ul>
<p><strong>QianKun</strong> is built upon <strong>single-spa</strong>, listening for <code>location</code> changes, and then matching and loading sub-applications accordingly. Each sub-application has its own entry file and DOM container. This approach is similar to using multiple entry files in <code>webpack</code>.</p>
<h2 id="the-principles-of-component-design"><a href="#the-principles-of-component-design" class="headerlink" title="the principles of component design"></a>the principles of component design</h2><ol>
<li><strong>single responsibility principle</strong>. to compose complex components by smaller specialized components.</li>
<li><strong>conceals</strong> the construction of components, and only <strong>reveals</strong> the necessary information</li>
<li>To ensure predictability and determinacy of components, <strong>always return the same output for a given input</strong></li>
<li><strong>keep loose coupling</strong>, instead of tight coupling. Components should have little or no knowledge about others.</li>
<li><strong>composable</strong>. Composition is a way to combine components to create a bigger component</li>
<li><strong>reuseable</strong></li>
<li><strong>pure or almost pure function</strong> which means no side effects and doesn’t depend on the environment or the global state, such as network or global variables.</li>
<li><strong>isolate the impure code</strong> from the pure</li>
<li><strong>straightforward to test</strong></li>
<li><strong>a meaningful name</strong>. If a component’s usage is highly specific, its name may contain more words, like <code>&lt;HeaderMenu&gt;</code> <code>&lt;Header&gt;</code></li>
</ol>
<p><strong>the levels of a component based on its usage</strong><br>    1. Reading name and props; <strong>best</strong><br>    2. Consulting documentation; <strong>good</strong><br>    3. Exploring the code; <strong>admissible</strong><br>    4. Asking the author. <strong>avoid</strong></p>
<h2 id="performance-optimization"><a href="#performance-optimization" class="headerlink" title="performance optimization"></a>performance optimization</h2><ul>
<li>avid <code>reflow</code> and <code>repaint</code></li>
<li>utilize <code>prefetch</code> and <code>preload</code> to enhance the execution order of js and prevent it from blocking HTML rendering</li>
<li>enable GZIP compression on the server</li>
<li>minimize the number of DOM elements and keep the DOM structure as simple as possible</li>
<li>lazy loading</li>
<li>virtual scroll<ul>
<li>listen to scroll event, only render the items within the visible area of parent element according the <code>scrollTop</code> and the visible height of the parent</li>
<li><em>dynamic height</em></li>
<li>Use the estimated height initially, and then replace the position value with the actual DOM height after rendering. Add a buffer area by rendering a few items at the top and bottom of the visible area. This provides more time to render and calculate for a smooth scrolling experience.</li>
</ul>
</li>
</ul>
<h2 id="browser-rendering"><a href="#browser-rendering" class="headerlink" title="browser rendering"></a>browser rendering</h2><h3 id="the-rendering-process"><a href="#the-rendering-process" class="headerlink" title="the rendering process"></a>the rendering process</h3><ul>
<li>browser obtains the IP address from the domain name through <code>DNS(domain name system) analysis</code></li>
<li>send a http request to that IP address</li>
<li>server receives the request and responds with html content</li>
<li>the browser parses html string and create a dom tree, and then proceeds to analyzes CSS, forming CSS rule trees</li>
<li>structure the rendering tree(only the nodes necessary for display)</li>
</ul>
<p><strong>GUI rendering thread and JS engine thread</strong></p>
<p>GUI(graphical user interface) rendering thread and JS engine thread are <code>mutual exclusive</code>. The rendering process pauses during the download, analysis, and execution of JS. When the browser encounters JS during the rendering process, it halts rendering to construct the rendering tree and passes control to the JS engine .</p>
<h3 id="reflow-and-repaint"><a href="#reflow-and-repaint" class="headerlink" title="reflow and repaint"></a>reflow and repaint</h3><ol>
<li><strong>reflow</strong>: When changes in DOM geometrical properties (like width, height, or display) affect the page layout or the position of other elements, the browser must recalculate the page’s layout.</li>
<li><strong>repaint</strong>: when the style(like color, background) of dom are changed<br>If <code>repaint</code> doesn’t affect the geometrical size of the DOM elements, then <code>reflow</code> isn’t required. However, <code>reflow</code>  will inevitably trigger <code>repaint</code>.</li>
</ol>
<p><strong>avid <code>reflow</code> and <code>repaint</code> as much as possible</strong></p>
<ul>
<li>use <code>transform</code> instead of <code>positive and top</code>, the former performs changes in the GPU instead of <code>causing</code> reflow and occupying the rendering thread.</li>
<li>use <code>visibility</code> instead of <code>display:none</code>, the former incur repaint only while the latter will change layout</li>
<li>instead of making multiple small changes to the DOM, try to make all necessary changes in one go.</li>
<li>accessing properties like <code>offsetWidth</code>, <code>offsetHeight</code>, or <code>getComputedStyle()</code> can trigger a reflow</li>
<li>use browser developer tools to monitor performance metrics like reflows, repaints, and rendering performance.</li>
</ul>
<h2 id="SVG"><a href="#SVG" class="headerlink" title="SVG"></a>SVG</h2><h3 id="properties"><a href="#properties" class="headerlink" title="properties"></a>properties</h3><p>width/height: define the size in the document<br>viewBox: first two number are min-x and min-y used to define the position,  the other two are define the scale relative to width/height</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">when the viewBox is same as width/height, then the dimension is 1. if it is smaller than width/height, then the dimension is larger than 1, and vice versa.</span><br><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 200 200&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">height</span>=<span class="string">&quot;200&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="path"><a href="#path" class="headerlink" title="path"></a>path</h3><p><strong>M</strong>: move to</p>
<p><strong>L</strong>: line to</p>
<p><strong>H</strong>: draw a horizontal line</p>
<p><strong>V</strong>: draw a vertical line</p>
<p><strong>Z</strong>: close path, combine the start and the end</p>
<p><strong>C</strong>: curve, x1 y1 x2 y2 x y, the last set x y specify where the line should end and the line start at  the point where the last operation ended, the first two are control points.</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">svg</span> <span class="attr">className</span>=<span class="string">&quot;selected-round-btm&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 8 8&quot;</span> <span class="attr">width</span>=<span class="string">&quot;8&quot;</span> <span class="attr">height</span>=<span class="string">&quot;8&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M 0,8 L 8,8 L 8,0 C 8,0 8,8 0,8 &quot;</span> <span class="attr">fill</span>=<span class="string">&quot;#fff&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">circle</span> <span class="attr">cx</span>=<span class="string">&quot;0&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;0&quot;</span> <span class="attr">r</span>=<span class="string">&quot;8&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;#e4e4e4&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>S</strong>: smooth curveto</p>
<p><strong>A</strong>: <code>rx ry x-axis-rotation large-arc-flag sweep-flag x y</code>, draw an arc</p>
<ul>
<li><p><code>rx ry</code> radius x and radius y</p>
</li>
<li><p><code>x-axis-rotation</code></p>
</li>
<li><p><code>large-arc-flag</code> determines that the arc should be greater than or less than 180 degrees.</p>
</li>
<li><p><code>sweep-flag</code> determines that the drawing direction is clockwise or anticlockwise.</p>
</li>
<li><p><code>x y</code> the ending point calculated with angle, while the arc starting point is at three o’clock of a circle, <code>circle center + radius = the arc starting point</code></p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// get the ending point with an angle</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">polarToCartesian</span>(<span class="params">centerX, centerY, radius, angleInDegrees</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> angleInRadians = (angleInDegrees * <span class="built_in">Math</span>.PI) / <span class="number">180.0</span> <span class="comment">// the length of the arc</span></span><br><span class="line">	<span class="keyword">const</span> largeArcFlag = angleInDegrees &lt;= <span class="number">180</span> ? <span class="string">&quot;0&quot;</span> : <span class="string">&quot;1&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> x = centerX + radius * <span class="built_in">Math</span>.cos(angleInRadians)</span><br><span class="line">  <span class="keyword">const</span> y = centerY + radius * <span class="built_in">Math</span>.sin(angleInRadians)</span><br><span class="line">  <span class="keyword">return</span> [radius, radius, largeArcFlag, <span class="number">0</span>, x, y]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><em>a 360-degree circle can’t be done by one arc</em>, since the end point are same with the start point. but it consist of two arcs.</p>
<ul>
<li><code>&quot;M 140 80 A 60 60 0 0 0 20 80</code> + <code>60 60 0 1 0 140 80</code></li>
</ul>
</li>
</ul>
<p><strong>Q</strong>: x1 y1, x y, quadratic Bézier curve, to control the slope of two sides with one point, which is  the first set<br><strong>T</strong>: x y, smooth quadratic Bézier curveto, auto control the slope of two sides according to the last control point</p>
<h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h3><blockquote>
<p><strong>in &amp;&amp; in2</strong>, SourceGraphic | SourceAlpha | BackgroundImage | BackgroundAlpha | FillPaint | StrokePaint | <filter-primitive-reference><br>1.<code>in</code> is the first input, and <code>in2</code> is the second input, while the placing order is same with the layer order of PS<br>2.if <code>in</code> is not existed, then the value will be the previous filter input</filter-primitive-reference></p>
</blockquote>
<ul>
<li><strong>feBlend</strong>, to blend two layers ruled by a certain blending mode<ul>
<li><code>in</code></li>
<li><code>in2</code></li>
<li><code>mode</code></li>
</ul>
</li>
<li><strong>feComposite</strong>, to combine two input images<ul>
<li><code>in</code></li>
<li><code>in2</code></li>
<li><code>operator</code>, compositing operations</li>
</ul>
</li>
</ul>
<h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><h3 id="stacking-context"><a href="#stacking-context" class="headerlink" title="stacking context"></a>stacking context</h3><p>Special properties like <code>z-index</code> will cause elements to form a <code>stacking context 层叠上下文</code>, as those properties can change the render order of elements on the page if their values are set to something other than <code>none</code></p>
<p>position, opacity, filter, transform, <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_positioned_layout/Understanding_z-index/Stacking_context#description">detailed list of such special properties</a></p>
<h3 id="selector"><a href="#selector" class="headerlink" title="selector"></a>selector</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* nth-of-type and nth-child, the former according to the order of a given type, while the latter according to the order of children*/</span></span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">2</span>) &#123; &#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:nth-of-type</span>(odd) &#123; &#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:nth-of-type</span>(even) &#123; &#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">3</span>n) &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* select p which is behind h1*/</span></span><br><span class="line"><span class="selector-tag">h1</span> + <span class="selector-tag">p</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*select all the children of container*/</span></span><br><span class="line"><span class="selector-class">.container</span> &gt; * &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* according to element&#x27;s attributes */</span></span><br><span class="line"><span class="selector-tag">input</span><span class="selector-attr">[type=<span class="string">&quot;button&quot;</span>]</span> &#123; &#125;</span><br></pre></td></tr></table></figure>

<h3 id="box-module"><a href="#box-module" class="headerlink" title="box module"></a>box module</h3><p>standard box: only content is included in <code>with / height</code><br>IE box: border / padding / content are included in <code>with / height</code></p>
<p>box-sizing: content-box = standard<br>box-sizing: border-box = IE</p>
<h3 id="layouts"><a href="#layouts" class="headerlink" title="layouts"></a>layouts</h3><ul>
<li><p><strong>adaptive design</strong>: multiple predefined layouts are created for different screen sizes</p>
</li>
<li><p><strong>responsive design</strong>: use flexible grids and elements that automatically adjust and reflow based on the viewport size</p>
</li>
<li><p>物理像素：计算机硬件，真实屏幕的像素点</p>
</li>
<li><p>css像素：属于逻辑像素的一种</p>
</li>
<li><p>设备像素比（Device Pixel Ratio，DPR）：物理像素与逻辑像素之比吗，比如iphone6物理像素是750 x1334，但实际逻辑像素是 375* 667，所以dpr = 2，这表示iphone6采用高清屏使用两个像素去渲染一个像素使画面更高清，iphone6 plus 甚至是dpr = 3</p>
</li>
<li><p>1px 问题：设计师的视觉稿是相对于物理像素750px，实现一个1px边框，但css逻辑像素是375px，border-width:0.5px 使用transform: scale(0.5)</p>
</li>
<li><p><strong>% + meta</strong></p>
</li>
<li><p>vw/vh/% + px + flex layout，响应式布局</p>
</li>
<li><p>flex + vw/v/%h布局，局部使用px</p>
</li>
<li><p>在跨设备类型的时候（pc &lt;-&gt; 手机 &lt;-&gt; 平板）使用媒体查询</p>
</li>
<li><p>rem ，响应式布局，动态设置 root 的 fontsize，子节点使用rem，和flexible不同的是可以根据pc、手机、平板的尺寸来设置比例使子节点计算方便</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> deviceWidth = <span class="built_in">document</span>.documentElement.clientWidth</span><br><span class="line">deviceWidth = deviceWidth &lt; <span class="number">320</span> ? <span class="number">320</span> : deviceWidth &gt; <span class="number">640</span> ? <span class="number">640</span> : deviceWidth</span><br></pre></td></tr></table></figure>

<h4 id="flexible-self-adoption"><a href="#flexible-self-adoption" class="headerlink" title="flexible, self-adoption"></a>flexible, self-adoption</h4><p><strong>模拟vw特性</strong>，动态的将页面宽度的1/10作为根节点的 fontsize，子节点使用rem就等于是按照页面比例计算</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> doc = <span class="built_in">document</span>.documentElement</span><br><span class="line"><span class="keyword">var</span> rem = doc.clientWidth / <span class="number">10</span></span><br><span class="line">doc.style.fontSize = rem + <span class="string">&#x27;px&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>高倍屏适配</strong>，修改了等比缩放视口的scale值，使得clientWidth变为物理像素尺寸，1物理像素等于1css像素，由原来的375=&gt;750, media尺寸查询语句也同样需要修改</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> metaEL = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;meta[name=&quot;viewport&quot;]&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> dpr = <span class="built_in">window</span>.devicePixelRatio</span><br><span class="line"><span class="keyword">var</span> scale = <span class="number">1</span> / dpr</span><br><span class="line">metaEL.setAttribute(<span class="string">&#x27;content&#x27;</span>, <span class="string">&#x27;width=device-width, initial-scale=&#x27;</span> + scale + <span class="string">&#x27;, maximum-scale=&#x27;</span> + scale + <span class="string">&#x27;, minimum-scale=&#x27;</span> + scale + <span class="string">&#x27;, user-scalable=no&#x27;</span>)</span><br><span class="line"><span class="built_in">document</span>.documentElement.style.fontSize = deviceWidth / <span class="number">7.5</span> + <span class="string">&#x27;px&#x27;</span> <span class="comment">// 7.5并不固定</span></span><br></pre></td></tr></table></figure>

<h4 id="centered-and-vertically-aligned-layout"><a href="#centered-and-vertically-aligned-layout" class="headerlink" title="centered and vertically aligned layout"></a>centered and vertically aligned layout</h4><ul>
<li><p>Flex</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Grid</p>
</li>
<li><p><code>display: table</code> and <code>display: table-cell;vertical-align: middle;</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: table;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">300px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.child</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: table-cell;</span><br><span class="line">  <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>position</code> and <code>transform</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.child</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="others"><a href="#others" class="headerlink" title="others"></a>others</h3><ul>
<li><p>text linear-gradient</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attribute">color</span>: transparent;</span><br><span class="line">  -webkit-<span class="attribute">background-clip</span>: text;</span><br><span class="line">  <span class="attribute">background-clip</span>: text;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">130deg</span>,red,black);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>browsers (like chrome) can set a <code>minimum fontsize</code> which can’t be overthrow, but <code>transform: scale</code> can be a workaround</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// set an unseen element for getting the minimum size</span></span><br><span class="line"><span class="keyword">const</span> minimumSize = <span class="built_in">Number</span>.parseInt(<span class="built_in">window</span>.getComputedStyle(<span class="built_in">document</span>.getElementById(<span class="string">&quot;minimumSize&quot;</span>), <span class="literal">null</span>).getPropertyValue(<span class="string">&quot;font-size&quot;</span>).replace(<span class="regexp">/px/</span>, <span class="string">&quot;&quot;</span>))</span><br><span class="line">  <span class="comment">// generate different scales based on the minimumSize</span></span><br><span class="line">  <span class="comment">//the app has been set to fit `window.devicePixelRatio`  in this situation. so the fontsize takes rem as unit,  and item * fontSize is purposed to get the original size.</span></span><br><span class="line"><span class="keyword">const</span> fontSizes = [<span class="number">1.2</span>, <span class="number">1.3</span>, <span class="number">1.4</span>, <span class="number">1.6</span>, <span class="number">2</span>, <span class="number">2.8</span>].map(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">const</span> _s = item * fontSize &lt; minimumSize ? item * fontSize / minimumSize : <span class="number">1</span></span><br><span class="line">	<span class="keyword">return</span> <span class="string">`--fontSize<span class="subst">$&#123;item.toString().replace(<span class="regexp">/\./</span>, <span class="string">&quot;&quot;</span>)&#125;</span>:<span class="subst">$&#123;_s&#125;</span>;`</span></span><br><span class="line">&#125;).join(<span class="string">&quot;&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>transform</code> doesn’t work on inline elements</p>
</li>
<li><p>use <code>position: sticky</code> with <code>flex layout</code>. the sticked elements may still moving when user scrolling.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- set flex&#x27;s width to the sum total of all the cell widths 250vw to fix the problem --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span> <span class="attr">style</span>=<span class="string">&quot;overflow: auto&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex&quot;</span><span class="attr">style</span>=<span class="string">&quot;display: flex&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cell&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 25vw;flex-shrink: 0;background: green; position: sticky; left: 0&quot;</span>&gt;</span>cell<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cell&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 25vw;flex-shrink: 0;background: green;position: sticky; left: 25vw&quot;</span>&gt;</span>cell<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cell&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 25vw;flex-shrink: 0;background: red&quot;</span>&gt;</span>cell<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cell&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 25vw;flex-shrink: 0;background: red&quot;</span>&gt;</span>cell<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cell&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 25vw;flex-shrink: 0;background: red&quot;</span>&gt;</span>cell<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cell&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 25vw;flex-shrink: 0;background: red&quot;</span>&gt;</span>cell<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cell&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 25vw;flex-shrink: 0;background: red&quot;</span>&gt;</span>cell<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cell&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 25vw;flex-shrink: 0;background: red&quot;</span>&gt;</span>cell<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cell&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 25vw;flex-shrink: 0;background: red&quot;</span>&gt;</span>cell<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cell&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 25vw;flex-shrink: 0;background: red&quot;</span>&gt;</span>cell<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>text ellipsis</p>
<ul>
<li><p><code>text-overflow: ellipsis</code> only applies to single line</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.single</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>multiple lines</code></p>
<ul>
<li>use <code>after pseudo class</code> to  display “…” after the text</li>
<li>cut off the text through js</li>
</ul>
</li>
</ul>
</li>
<li><p><code>attr()</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.test</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;我的内容是&#x27;</span> <span class="built_in">attr</span>(text) <span class="string">&#x27;颜色是&#x27;</span> <span class="built_in">attr</span>(data-color);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;test&quot;</span> <span class="attr">data-text</span>=<span class="string">&quot;TEXT&quot;</span> <span class="attr">data-color</span>=<span class="string">&quot;red&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>shape-outside</code> make the adjoining inline-elements around itself</p>
</li>
<li><p><code>pseudo-elements</code>, don’t work on img/select/input</p>
<ul>
<li><code>::before</code> and <code>::after</code> can add elements, and clean float.</li>
<li><code>::first-line</code>, <code>::first-letter</code>, <code>::selection</code></li>
</ul>
</li>
<li><p><code>pseudo-class</code></p>
<ul>
<li><code>:enabled</code> and `:disabled</li>
<li><code>:checked</code></li>
<li><code>:nth-child(n)</code>, <code>:nth-of-type(n)</code></li>
</ul>
</li>
<li><p>element hiding</p>
<ul>
<li><code>transform: scale(0,0)</code> will not respond to event  listeners</li>
<li><code>visibility:visible</code> can display children whose parent is hidden by <code>visibility:hidden</code></li>
</ul>
</li>
<li><p>Browsers render empty characters between inline elements as whitespace.</p>
</li>
</ul>
<h2 id="Storage"><a href="#Storage" class="headerlink" title="Storage"></a>Storage</h2><ul>
<li><p><strong>cookie</strong>, 4kb, can set the expire time, <code>httpOnly = true</code> means this cookie is set by server and can only be changed by server</p>
</li>
<li><p><strong>localStorage</strong> <strong>sessionStorage</strong>, maximum size 5MB</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">localStorage</span>.setItem(<span class="string">&#x27;chooseId&#x27;</span>,<span class="built_in">JSON</span>.stringify(<span class="built_in">this</span>.$route.params))</span><br><span class="line"><span class="built_in">localStorage</span>.removeItem(<span class="string">&#x27;chooseId&#x27;</span>)</span><br><span class="line"><span class="built_in">localStorage</span>.clear()</span><br><span class="line"><span class="built_in">localStorage</span>.key(index)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>indexedDB</strong> no size limits, it can be used like a database</p>
</li>
<li><p><strong>caches</strong>, an object which include <code>cache  instance</code>s, each <code>cache instance</code> can viewed as a storage region. the return type of all the methods of <code>caches</code> or <code>cache instance</code> is <code>promise</code>.</p>
<ul>
<li><p>methods which are mounted on <code>caches</code> are used for managing <code>cache instance</code>s.</p>
<ul>
<li><code>caches</code>: <code>keys</code> <code>open</code> <code>delete</code> <code>has</code> <code>match</code></li>
<li>differ between <code>has</code> and match: has return boolean while match give you the data</li>
</ul>
</li>
<li><p>if we want to store something, then we need to use <code>open</code> to get a <code>cache instance</code> where is our data stay</p>
<ul>
<li><p><code>cache</code> instance: <code>add</code> <code>addAll</code> <code>keys</code> <code>delete</code> <code>match</code> <code>matchAll</code> <code>put</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// differ between `add` and `put`: add can `fetch` and `store` the data automatically, but also because of automatically then we can&#x27;t make changes on key and value to be stored</span></span><br><span class="line"><span class="comment">// so fetch + put = add</span></span><br><span class="line">cache.add(request).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// request has been added to the cache</span></span><br><span class="line">&#125;);</span><br><span class="line">fetch(url).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> cache.put(url, response);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>when use <code>cache with service worker</code>, the data we stored is the raw <code>response</code> returned by <code>http</code></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="RegExp-regular-expression"><a href="#RegExp-regular-expression" class="headerlink" title="RegExp (regular expression)"></a>RegExp (regular expression)</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> re = <span class="keyword">new</span> <span class="built_in">RegExp</span>(“a”, <span class="string">&quot;img&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> re = <span class="regexp">/a/img</span>;</span><br></pre></td></tr></table></figure>

<h3 id="modifier"><a href="#modifier" class="headerlink" title="modifier"></a>modifier</h3><ul>
<li><code>i</code> ignore uppercase and lowercase of letters</li>
<li><code>g</code> global matching, to search from the start to the end whatever how much</li>
<li><code>m</code> matching on multiple lines</li>
<li>es6 <code>u</code> turn on <code>Unicode mode</code> to deal with Unicode characters</li>
<li>es6 <code>y</code> similar with <code>g</code>, but it’s match work started form the beginning of the string<ul>
<li>it’s effect is equal to add <code>^</code> at the beginning of a regexp, so it could regarded as a complement  for that <code>g</code> couldn’t add <code>^</code></li>
<li><code>sticky</code>, new property of RegExp, to know the regexp is added <code>y</code> or not</li>
</ul>
</li>
</ul>
<h3 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h3><ul>
<li><p>es6 <code>regexp.flags</code>, get all the modifiers</p>
</li>
<li><p>es6 <code>regexp.source</code>, get the regexp context</p>
</li>
<li><p><code>regexp.lastIndex</code>, allow you to define and get the index from where the next match work started</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> REGEX = <span class="regexp">/a/g</span>;</span><br><span class="line">REGEX.lastIndex = <span class="number">2</span>; <span class="comment">// to define the index</span></span><br><span class="line"><span class="keyword">const</span> match = REGEX.exec(<span class="string">&#x27;match a string&#x27;</span>);</span><br><span class="line">match.index <span class="comment">// 6</span></span><br><span class="line">REGEX.lastIndex <span class="comment">// 7， to get the index</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>test(), is matching or not</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">regExp.test(str) <span class="comment">// boolean</span></span><br></pre></td></tr></table></figure>

<p>search()</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string.search(regExp) <span class="comment">// return an index or -1</span></span><br></pre></td></tr></table></figure>

<p>replace(), es6 replaceAll</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string.replace(regExp, replaceText) <span class="comment">// return the replaced string</span></span><br></pre></td></tr></table></figure>

<p>exec()</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">regExp.exec(string) <span class="comment">// return an array of information which include lastIndex, allow you to match along the last position.</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// use with while</span></span><br><span class="line"><span class="keyword">var</span> regExp = <span class="regexp">/t(e)(st(\d?))/g</span>;</span><br><span class="line"><span class="keyword">var</span> string = <span class="string">&#x27;test1test2test3&#x27;</span>;</span><br><span class="line"><span class="keyword">while</span> (match = regExp.exec(string)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(match)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>with named capture groups(具名组匹配), you can get the data of each group which declared by <code>()</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> regExp = <span class="regexp">/(?&lt;year&gt;\d&#123;4&#125;)-(?&lt;month&gt;\d&#123;2&#125;)-(?&lt;day&gt;\d&#123;2&#125;)/</span></span><br><span class="line"><span class="keyword">const</span> matchObj = regExp.exec(<span class="string">&#x27;1999-12-31&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>match(), es6 matchAll</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;For more information, see Chapter 3.4.5.1&#x27;</span>.match( <span class="regexp">/see (chapter \d+(\.\d)*)/i</span>) <span class="comment">// return an array of information</span></span><br></pre></td></tr></table></figure>

<h3 id="symbols"><a href="#symbols" class="headerlink" title="symbols"></a>symbols</h3><p><strong>PS</strong> Safari does not support <code>?!=n</code> <code>?&lt;=n</code> <code>?&lt;!=n</code> <code>?:n</code></p>
<table>
<thead>
<tr>
<th>key</th>
<th>usage</th>
</tr>
</thead>
<tbody><tr>
<td><code>()</code></td>
<td>Parentheses, to group regular expressions</td>
</tr>
<tr>
<td><code>[]</code></td>
<td>match any character within the brackets</td>
</tr>
<tr>
<td><code>^</code>  <code>$</code></td>
<td>match from the start or the end of the string</td>
</tr>
<tr>
<td><code>[^a]</code></td>
<td>match string which no ”a“</td>
</tr>
<tr>
<td><code>&#123;n,m&#125;</code></td>
<td>the display times &gt; n and &lt; m</td>
</tr>
<tr>
<td><code>&#123;n,&#125;</code></td>
<td>the display times &gt; n</td>
</tr>
<tr>
<td><code>&#123;,m&#125;</code></td>
<td>the display times &lt; m</td>
</tr>
<tr>
<td><code>*</code></td>
<td>equal to {0,}</td>
</tr>
<tr>
<td><code>+</code></td>
<td>equal to {1,}</td>
</tr>
<tr>
<td><code>?</code></td>
<td>equal to {,1},  /.*?(\d)/, when ? is used with greed mode, it means to exclude a specific format</td>
</tr>
<tr>
<td>|</td>
<td>a|b === a or b</td>
</tr>
<tr>
<td><code>.</code></td>
<td>equal to {1,}</td>
</tr>
<tr>
<td><code>.*</code></td>
<td>greedy mode</td>
</tr>
<tr>
<td><code>.*?</code></td>
<td>the regex engine will, at every step it matches text into the “.” attempt to match whatever make come after the “.*?”</td>
</tr>
<tr>
<td><code>\d</code></td>
<td>equal to <code>[0-9]</code></td>
</tr>
<tr>
<td><code>\D</code></td>
<td>equal to <code>[^0-9]</code></td>
</tr>
<tr>
<td><code>\w</code></td>
<td>equal to <code>[a-zA-Z_]</code></td>
</tr>
<tr>
<td><code>\W</code></td>
<td>equal to <code>[^/w]</code></td>
</tr>
<tr>
<td><code>\s</code></td>
<td>equal to <code>[ \f\n\r\t\v]</code>(换页,enter,空格,tab,垂直制表符) , matching all the empty characters</td>
</tr>
<tr>
<td><code>\S</code></td>
<td>equal to <code>[^/s]</code></td>
</tr>
<tr>
<td><code>/S/s</code></td>
<td>all the characters</td>
</tr>
<tr>
<td>(.|\n)*</td>
<td>to match any characters across multiple line</td>
</tr>
<tr>
<td><code>?=n</code></td>
<td>match string but don’t get, the string <strong>after</strong> which <strong>is</strong> n</td>
</tr>
<tr>
<td><code>?!=n</code></td>
<td>match string but don’t get, the string <strong>after</strong> which <strong>isn’t</strong> n</td>
</tr>
<tr>
<td><code>?&lt;=n</code></td>
<td>(incompatible with safari) match string but don’t get, the string <strong>before</strong> which <strong>is</strong> n</td>
</tr>
<tr>
<td><code>?&lt;!=n</code></td>
<td>match string but don’t get, the string <strong>before</strong> which <strong>isn’t</strong> n</td>
</tr>
<tr>
<td><code>?:n</code></td>
<td>match string but don’t get</td>
</tr>
</tbody></table>
<h3 id="examples"><a href="#examples" class="headerlink" title="examples"></a>examples</h3><p>to match every character except ,;</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/[^,;]+/</span><br></pre></td></tr></table></figure>

<p>to match a string, stop matching until a specific format is encountered</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// ?(?=hello) match string but don&#x27;t get</span></span><br><span class="line"> <span class="comment">// ?(hello) match string and get</span></span><br><span class="line"><span class="string">&#x27;&quot;/public/images/index/组 4099.png&quot;,&quot;textAlign&quot;:&quot;&#x27;</span>.match(<span class="regexp">/public\/images\/(.*?(?=&quot;))/img</span>)</span><br></pre></td></tr></table></figure>

<p>verify float number, two standards judged by <code>|</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/^(([<span class="number">0</span>-<span class="number">9</span>]+\.?[<span class="number">0</span>-<span class="number">9</span>]+)|([<span class="number">0</span>-<span class="number">9</span>]*))$/.test(<span class="string">&quot;5.&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>get an array of date number arranged by <code>[year, month, day, hour, minute, second]</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>().toLocaleString(<span class="string">&quot;zh&quot;</span>).match(<span class="regexp">/[0-9]*/g</span>).filter(<span class="function">(<span class="params">el</span>) =&gt;</span> el).map(<span class="function"><span class="params">el</span> =&gt;</span> (el.length &lt; <span class="number">2</span> ? <span class="string">&quot;0&quot;</span> : <span class="string">&quot;&quot;</span>) + el)</span><br></pre></td></tr></table></figure>

<ul>
<li>extract the type in the string returned by <code>Object.prototype.toString.call</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/(?&lt;=\[object ).*(?=])/.exec(<span class="built_in">Object</span>.prototype.toString.call(&#123;&#125;))</span><br></pre></td></tr></table></figure>

<h2 id="Javascript"><a href="#Javascript" class="headerlink" title="Javascript"></a>Javascript</h2><h3 id="symbol-and-keyword"><a href="#symbol-and-keyword" class="headerlink" title="symbol and keyword"></a>symbol and keyword</h3><table>
<thead>
<tr>
<th>keyword</th>
<th>function</th>
</tr>
</thead>
<tbody><tr>
<td><code>=~</code></td>
<td>按位非var <code>num1=~25;//-26 值反一次再减一</code></td>
</tr>
<tr>
<td><code>6%4</code></td>
<td>取余, c%2 !== 0</td>
</tr>
<tr>
<td><code>~~</code></td>
<td>取整 <code>~~(6 / 4) // 1  ~~(9 / 4) // 2</code></td>
</tr>
<tr>
<td><code>yield next</code> <code>yield*</code></td>
<td>to stop or resume a generate function, yield* 加入另一个可迭代的对象</td>
</tr>
<tr>
<td><code>es6</code> <code>?.</code></td>
<td>optional chain, stop running when null or undefined is encountered</td>
</tr>
<tr>
<td><code>es6</code> <code>??</code></td>
<td><code>null ?? 4; 4 ?? 5</code> the right value will be returned when the left value is <code>null</code> or <code>undefined</code></td>
</tr>
<tr>
<td><code>es6</code> <code>&amp;&amp;=</code></td>
<td><code>a &amp;&amp;= 1</code> === <code>a &amp;&amp; (a=1)</code> // if a is existed then assign 1 to it</td>
</tr>
<tr>
<td><code>es6</code> <code>??=</code></td>
<td><code>a ??= 1</code> === <code>a ?? (a=1)</code> // if a is <code>null</code> or <code>undefined</code> then assign 1 to it</td>
</tr>
<tr>
<td><code>es6</code> <code>**</code></td>
<td>指数运算符    <code>2 ** 3 // 8</code> b **= 3;  // equal to <code>b = b * b * b;</code></td>
</tr>
<tr>
<td><code>es6</code> <code>symbol</code></td>
<td>data type: designed to prevent conflicts in property naming</td>
</tr>
</tbody></table>
<ul>
<li><p><strong>delete obj.a</strong> delete an object’s own property without affecting properties that are part of the object’s prototype chain</p>
</li>
<li><p><strong>in</strong>: to get know whether a property or an item exists</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>]; <span class="built_in">console</span>.log(<span class="number">0</span> <span class="keyword">in</span> arr); <span class="comment">// true</span></span><br><span class="line"><span class="keyword">var</span> arr = &#123; <span class="attr">a</span>: <span class="number">4</span> &#125;; <span class="built_in">console</span>.log(<span class="string">&#x27;a&#x27;</span> <span class="keyword">in</span> arr);  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>es6</code> <strong>… spread syntax</strong> to expand an iterable such as an array expression or string</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// express rest arguments</span></span><br><span class="line"><span class="keyword">const</span> bar = <span class="function">(<span class="params">...args</span>) =&gt;</span> args</span><br><span class="line"></span><br><span class="line"><span class="comment">// to concat or insert items</span></span><br><span class="line">&#123; ...obj1, ...obj2 &#125;</span><br><span class="line">[...iterableObj, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;five&#x27;</span>, <span class="number">6</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// Applying with new operator</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(...[<span class="number">1970</span>, <span class="number">0</span>, <span class="number">1</span>])</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>while</strong>, the expression inside the brackets can be an assigning expression</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">var</span> bb = <span class="number">1</span></span><br><span class="line"> <span class="keyword">while</span> (aa = bb) &#123; <span class="comment">// assigning the value of bb to aa, and judge aa is false or not</span></span><br><span class="line"><span class="built_in">console</span>.log(aa)</span><br><span class="line">bb++</span><br><span class="line"><span class="keyword">if</span> (bb === <span class="number">5</span>) bb = <span class="literal">null</span> <span class="comment">// bb = null, then aa = null</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>break   continue   return</strong>, <code>break</code> is used in <code>switch/while/if/for</code> to break one layer of the loop</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (i === <span class="number">3</span>) <span class="keyword">continue</span></span><br><span class="line"><span class="built_in">console</span>.log(i)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>es6</code> <strong>set</strong> similar to Array, but each item in <code>set</code> is unique</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> items = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>]);</span><br><span class="line">items.size <span class="comment">// the length is 5, and the repeated value aren&#x27;t be counted</span></span><br><span class="line">items.add(<span class="number">6</span>) <span class="comment">// add item</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>es6</code> <strong>map</strong> similar to <code>set</code>, but <code>key: value</code> structure like an <code>object</code>. the <code>key</code> of an <code>object</code> is <code>string</code>, while the <code>key</code> of a <code>map</code> can be any type.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"><span class="keyword">const</span> o = &#123;<span class="attr">p</span>: <span class="string">&#x27;Hello World&#x27;</span>&#125;;</span><br><span class="line">m.set(o, <span class="string">&#x27;content&#x27;</span>)</span><br><span class="line">m.get(o)</span><br><span class="line">m.size <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>es6</code> <strong>WeakMap &amp;&amp; WeakSet</strong>, all the properties of the two are shallow copied(<strong>weak reference</strong>), if an <code>object</code> are referenced only by <code>WeakSet</code>, then this <code>object</code> will be deleted by <strong>Garbage-Collection</strong></p>
</li>
<li><p><strong>export</strong> &amp;&amp; <strong>import</strong> &amp;&amp; <strong>export default</strong></p>
</li>
</ul>
<h3 id="variable-declaration"><a href="#variable-declaration" class="headerlink" title="variable declaration"></a>variable declaration</h3><p><strong>var</strong></p>
<ul>
<li><p>if  a <code>var</code> variable is not declared in a function scope, then it is a <code>global object</code> and is mounted on <code>window</code></p>
</li>
<li><p>can be re-declared in a same scope</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c = <span class="number">10</span></span><br><span class="line"><span class="keyword">let</span> c = <span class="number">20</span> <span class="comment">// Identifier &#x27;b&#x27; has already been declared</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>var</code> variables can be used before declare, <code>var</code> declaration will be raising to the first line when engine is running, even the variable is declared in a block scope</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a) <span class="comment">// warning</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">1</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong>let, const</strong></p>
<ul>
<li><p><code>let</code> is used to declare a variable.</p>
</li>
<li><p><code>const</code> declares a constant with simultaneous assignment and declaration, and its value cannot be reassigned. For reference type data, the value maintains the memory location unchanged.</p>
</li>
<li><p>no variable increase</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> m   = <span class="string">&#x27;block scope&#x27;</span>;</span><br><span class="line">  <span class="keyword">const</span> n = <span class="string">&#x27;block scope 2&#x27;</span>;</span><br><span class="line">  <span class="keyword">var</span> k = <span class="string">&#x27;global scope&#x27;</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(m); <span class="comment">// block scope</span></span><br><span class="line">  <span class="built_in">console</span>.log(n); <span class="comment">// block scope 2</span></span><br><span class="line">  <span class="built_in">console</span>.log(k); <span class="comment">// global scope</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(m); <span class="comment">// Reference Error</span></span><br><span class="line"><span class="built_in">console</span>.log(n); <span class="comment">// Reference Error</span></span><br><span class="line"><span class="built_in">console</span>.log(k); <span class="comment">// global scope</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line">  <span class="keyword">if</span> (a == <span class="number">1</span>)  <span class="keyword">let</span> a = <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">1</span></span><br><span class="line">  <span class="keyword">if</span> (a == <span class="number">1</span>) <span class="keyword">var</span> a = <span class="number">2</span> <span class="comment">// warning</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>a variable cannot be declared with the same name as a function’s arguments.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">arg</span>) </span>&#123; <span class="keyword">var</span> arg &#125;)()</span><br><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">arg</span>) </span>&#123; <span class="keyword">let</span> arg &#125;)()  <span class="comment">// SyntaxError</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="es6-shorthand"><a href="#es6-shorthand" class="headerlink" title="es6 shorthand"></a>es6 shorthand</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;</span><br><span class="line">  <span class="string">&#x27;first word&#x27;</span>: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">  [lastWord]: <span class="string">&#x27;world&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> baz = &#123;foo&#125;</span><br></pre></td></tr></table></figure>

<h4 id="iterate"><a href="#iterate" class="headerlink" title="iterate"></a>iterate</h4><ul>
<li><code>for...in...</code> iterate object’s key and array’s index</li>
<li><code>forEach</code> can’t jump out by <code>return</code>, <code>forEach</code> <code>for...of...</code> iterate value and can’t be used on Object</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.keys(obj) <span class="comment">// without Symbol</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyNames(obj) <span class="comment">// without Symbol</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertySymbols(obj) <span class="comment">// only Symbol</span></span><br><span class="line"><span class="built_in">Reflect</span>.ownKeys(obj) <span class="comment">// all the attribute names no except</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> obj) <span class="built_in">console</span>.log(obj[i])</span><br></pre></td></tr></table></figure>

<h4 id="Instance’s-Properties"><a href="#Instance’s-Properties" class="headerlink" title="Instance’s Properties"></a>Instance’s Properties</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Object.create(null) will create an object which does not inherit from Object.prototype, so the methods of Object are inaccessible.</span></span><br><span class="line"><span class="built_in">Object</span>.create(<span class="literal">null</span>).hasOwnProperty(<span class="string">&quot;foo&quot;</span>) <span class="comment">// error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// the following two are worked same</span></span><br><span class="line"><span class="built_in">Object</span>.hasOwn(&#123;<span class="attr">a</span>:<span class="number">0</span>&#125;,<span class="string">&quot;a&quot;</span>)</span><br><span class="line"><span class="built_in">Object</span>.prototype.hasOwnProperty.call(&#123;<span class="attr">a</span>:<span class="number">0</span>&#125;, <span class="string">&quot;a&quot;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="Object’s-Properties"><a href="#Object’s-Properties" class="headerlink" title="Object’s Properties"></a>Object’s Properties</h4><ul>
<li><p><code>es6</code> <code>Object.values(&#123;&#125;)</code> <code>Object.keys(&#123;&#125;)</code></p>
</li>
<li><p><code>es6</code> <code>Object.assign()</code>, copy the properties of the arguments to the first argument</p>
</li>
<li><p><code>es6</code> <code>Object.entries(&#123;&#125;)</code> <code>Object.fromEntries([])</code> transform object to array and vice visa</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;<span class="attr">a</span>: <span class="string">&#x27;someString&#x27;</span>, <span class="attr">b</span>: <span class="number">42</span>&#125;</span><br><span class="line"><span class="built_in">Object</span>.entries(obj) <span class="comment">// [[&#x27;a&#x27;, &#x27;someString&#x27;], [&#x27;b&#x27;, 42]]</span></span><br><span class="line"><span class="built_in">Object</span>.fromEntries(<span class="built_in">Object</span>.entries(obj)) <span class="comment">// &#123;a: &#x27;someString&#x27;, b: 42&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>es6</code> <code>Object.is(value1, value2)</code> compare whether two values are same, can compare objects by comparing they reference. almost same as <code>===</code>, but there has two differences:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+<span class="number">0</span> === -<span class="number">0</span> <span class="comment">//true</span></span><br><span class="line"><span class="literal">NaN</span> === <span class="literal">NaN</span> <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.is(+<span class="number">0</span>, -<span class="number">0</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="literal">NaN</span>, <span class="literal">NaN</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Object.prototype.toString.call()</code> get data’s type</p>
</li>
<li><p><code>es6</code> <code>Object.getOwnPropertyDescriptors</code></p>
</li>
<li><p><code>es6</code> <code>Object.setPrototypeOf()</code> <code>Object.getPrototypeOf()</code> set and get the prototype of an object</p>
</li>
</ul>
<h4 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h4><ul>
<li><p><code>JSON.parse(string)</code></p>
</li>
<li><p><code>JSON.stringify(obj)</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.stringify(object: any, <span class="attr">replacer</span>: <span class="function">(<span class="params">key: string, value: any</span>) =&gt;</span> any, <span class="attr">space</span>: string)</span><br><span class="line"><span class="keyword">const</span> foo = &#123;</span><br><span class="line">  <span class="attr">foundation</span>: <span class="string">&quot;Mozilla&quot;</span>,</span><br><span class="line">  <span class="attr">model</span>: <span class="string">&quot;box&quot;</span>,</span><br><span class="line">  <span class="attr">week</span>: <span class="number">45</span>,</span><br><span class="line">  <span class="attr">transport</span>: <span class="string">&quot;car&quot;</span>,</span><br><span class="line">  <span class="attr">month</span>: <span class="number">7</span>,</span><br><span class="line">  <span class="attr">obj</span>: &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">2</span>, </span><br><span class="line">    <span class="attr">b</span>:[<span class="number">7</span>,<span class="number">8</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// if replacer is a function, replacer will be called on each value to-string process</span></span><br><span class="line"><span class="comment">// ps: the value of the first call is the target object</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(foo, <span class="function">(<span class="params">key, value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key, value)</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;number&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> value </span><br><span class="line">&#125;) <span class="comment">// &#x27;&#123;&quot;foundation&quot;:&quot;Mozilla&quot;,&quot;model&quot;:&quot;box&quot;,&quot;week&quot;:&quot;number&quot;,&quot;transport&quot;:&quot;car&quot;&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// if replacer is an array and all the items are string, the resulting string will only keeps the &#123;key: value&#125; which&#x27;s key is listed in the replacer</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify(foo, [<span class="string">&quot;month&quot;</span>, <span class="string">&quot;obj&quot;</span>, <span class="string">&quot;a&quot;</span>]); <span class="comment">//&#x27;&#123;&quot;month&quot;:7,&quot;obj&quot;:&#123;&quot;a&quot;:2&#125;&#125;&#x27;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h3><ul>
<li><p><code>includes(item)</code>, <code>item</code> exists or not</p>
</li>
<li><p><code>lastIndexOf</code>, <code>indexOf</code> return <code>index</code></p>
</li>
<li><p><code>at(index)</code>, <code>index</code> can be negative, return item of the given index</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr.at(<span class="number">2</span>) <span class="comment">// 2</span></span><br><span class="line">arr.at(-<span class="number">2</span>) <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>forEach</code>    no return and cannot break the loop<br>if an <code>item</code> is deleted during the loop, the items after it will be skipped</p>
</li>
<li><p><code>every</code>    all items return true =&gt; return true, any one return false =&gt; return false and break the loop</p>
</li>
<li><p><code>some</code>    any item return true =&gt; true, no one return true =&gt; false</p>
</li>
<li><p><code>find</code> <code>findLast</code> | <code>findIndex</code> | <code>findLastIndex</code>  any item return true =&gt; return the item or index(findLast return the last one)，IE 11 doesn’t support</p>
</li>
<li><p><code>filter</code> return an array constituted by items which is returned true</p>
</li>
<li><p><code>map</code>    return an array constituted by the return data of the function</p>
</li>
<li><p><code>reduce</code> <code>reduceRight</code>, get an accumulation from an array, the latter is executed by the order of right to left</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>].reduce(<span class="function">(<span class="params">accumulator, currentValue, currentIndex, <span class="built_in">Array</span></span>) =&gt;</span> accumulator + currentValue)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>reverse</code>    reverse the order of an array</p>
</li>
<li><p><code>join</code></p>
</li>
<li><p><code>fill(value, start, end)</code></p>
</li>
<li><p><code>pop</code> / <code>shift</code>     remove the first / last item of an array, and return the removed item</p>
</li>
<li><p><code>unshift</code> / <code>push</code>    add item to the start / end of an array, and return the current length of an array</p>
</li>
<li><p><code>splice</code> <code>slice</code>, three parameters: start index, delete count, items which need to add. return the removed items<br><code>splice</code> changes the original array, while <code>slice</code> create new one</p>
</li>
<li><p><code>concat</code>    concat two or more arrays, and return a new array. the items of new array are <code>shallow copied</code></p>
</li>
<li><p><code>sort</code></p>
</li>
<li><p><code>flat</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数组降维，递归地将数组展平到指定的深度，默认为1	const array = [1, [2, [3]]];</span></span><br><span class="line">array.flat();  <span class="comment">// → [1, 2, [3]]</span></span><br><span class="line">array.flat(<span class="literal">Infinity</span>);   <span class="comment">// → [1, 2, 3]</span></span><br><span class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>].flatMap(<span class="function">(<span class="params">x</span>) =&gt;</span> [x, x * <span class="number">2</span>]);  <span class="comment">// → [2, 4, 3, 6, 4, 8]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>set</code></p>
<ul>
<li><code>has(value)</code> value exists or not</li>
<li><code>add(value)</code> return the array itself</li>
<li><code>delete(value)</code>    boolean, delete one item</li>
<li><code>clear()</code> no return, clean all items</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[...new <span class="built_in">Set</span>(array)]	<span class="comment">// repeated items will be deleted</span></span><br><span class="line"><span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(array)) <span class="comment">//	set to array</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="number-precision-issues"><a href="#number-precision-issues" class="headerlink" title="number precision issues"></a>number precision issues</h3><p><code>JS</code> uses the <code>IEEE 754 double-precision (64-bit) floating-point format</code>. computers use the binary (base-2) number system, which cannot precisely represent many decimal (base-10) fractions. some floating-point numbers, such as 0.1 or 0.2, will translate to infinitely repeating binary fractions.<br>IEEE 754 stores numbers in computer memory and allocates a 64-bit storage space(1-bit for a sign(express negative or positive), 11-bit for exponent, 52 -bit for fraction) for floating-point numbers.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// decimal to binary in computer</span></span><br><span class="line"><span class="number">0.1</span> (decimal) = <span class="number">0.0001100110011001100110011001100</span>... (binary)</span><br><span class="line"><span class="number">0.1</span>.toString(<span class="number">2</span>) <span class="comment">// 0.0001100110011001100110011001100110011001100110011001101</span></span><br></pre></td></tr></table></figure>

<p><strong>some workarounds in js</strong></p>
<ul>
<li><p>a tolerance for comparison</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> epsilon = <span class="number">1e-10</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.abs((<span class="number">0.1</span> + <span class="number">0.2</span>) - <span class="number">0.3</span>) &lt; epsilon);</span><br></pre></td></tr></table></figure>
</li>
<li><p>string conversion</p>
</li>
<li><p>scale numbers to integers to avoid fractions.</p>
</li>
</ul>
<h3 id="scope"><a href="#scope" class="headerlink" title="scope"></a>scope</h3><h4 id="scope-types"><a href="#scope-types" class="headerlink" title="scope types"></a>scope types</h4><ul>
<li><p><strong>global scope</strong></p>
<ul>
<li>defined at the external of the outmost function</li>
<li>declared without <code>var</code>, <code>let</code> and <code>const</code></li>
<li>belonging to <code>window</code></li>
</ul>
</li>
<li><p><strong>ES6 Module scope</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lib.js</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;a&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> b = <span class="string">&quot;b&quot;</span>;</span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;b&#125; <span class="keyword">from</span> <span class="string">&quot;lib&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// error</span></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// &quot;b&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>function or local scope</strong>, a variable is declared within a function, so it can’t be accessed from the outside.</p>
</li>
<li><p><strong>block scope</strong>, <code>if / switch / while / for</code> create a block scope. a variable which is defined by <code>let / const</code> is stay in block scope</p>
</li>
<li><p><strong>static scope</strong>, when looking a variable, the engine will go to the scope in which the variable was created</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">10</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(x); &#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">f</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> x = <span class="number">20</span>;</span><br><span class="line">  fn() <span class="comment">//10</span></span><br><span class="line">&#125;</span><br><span class="line">show(fn);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>nested scope</strong>, a scope can be nested inside another scope.</p>
</li>
</ul>
<h4 id="scope-chain"><a href="#scope-chain" class="headerlink" title="scope chain"></a>scope chain</h4><p>when the JavaScript engine try to find a variable, first it will seek in the current scope, if there is no result then it will go to the parent’s scope. finding layer by layer, that is <code>scope chain</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">100</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">F1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> b = <span class="number">200</span>;</span><br><span class="line">	(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> c = <span class="number">300</span></span><br><span class="line">		<span class="built_in">console</span>.log(a, b, c)</span><br><span class="line">	&#125;)()</span><br><span class="line">&#125;</span><br><span class="line">F1()</span><br></pre></td></tr></table></figure>

<h3 id="Memory-Management"><a href="#Memory-Management" class="headerlink" title="Memory Management"></a>Memory Management</h3><p><strong>life cycle</strong></p>
<ul>
<li><p>Allocate the memory</p>
<ul>
<li><p>JavaScript automatically allocate memory whenever a value is declared</p>
</li>
<li><p>function is considered as an object</p>
</li>
<li><p>arguments needs memory allocation</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s = <span class="string">&quot;azerty&quot;</span>;</span><br><span class="line"><span class="comment">// [0,3] range needs stored</span></span><br><span class="line"><span class="keyword">const</span> s2 = s.substr(<span class="number">0</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Use the allocated memory (read, write)</p>
<ul>
<li>reading and writing in allocated memory</li>
</ul>
</li>
<li><p>Release the allocated memory</p>
<ul>
<li>Garbage-Collection</li>
</ul>
</li>
</ul>
<h4 id="Garbage-Collection"><a href="#Garbage-Collection" class="headerlink" title="Garbage-Collection"></a>Garbage-Collection</h4><p>an object has a reference to its <code>prototype</code> (<code>implicit reference 隐式引用</code>) and to its properties values (<code>explicit reference 显示引用</code>).</p>
<p><strong>Reference-counting Garbage-Collection 引用计数垃圾收集</strong></p>
<ul>
<li><p>An object is said to be <code>garbage</code>, if there are zero references pointing to it.</p>
</li>
<li><p><code>circular references</code> easily results in <code>memory leak</code>. two objects are reference to each other in a function scope. They will go out of the function scope after the function call has completed. they are useless after the function is called, but they will not be considered <code>garbage</code> since they still have at least one reference.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> x = &#123;&#125;;</span><br><span class="line">  <span class="keyword">const</span> y = &#123;&#125;;</span><br><span class="line">  x.a = y; <span class="comment">// x references y</span></span><br><span class="line">  y.a = x; <span class="comment">// y references x</span></span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">f()</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong>mark and sweep algorithm 标记-清除算法</strong></p>
<ul>
<li>An object is said to be <code>garbage</code>, if an object is unreachable. the garbage collector starts from the root which is the global object in js, and inspects all the children recursively. Starting from the roots, the garbage collector will find all reachable objects and mark them as active. Any memory not marked as active can now be considered garbage.</li>
<li>with this algorithm, <code>circular references</code> is no longer a problem since the objects is unreachable after the function is completely.</li>
</ul>
<p><strong>weakly reference</strong></p>
<p>if an object is only held by weakly reference, then the object will be considered as unreachable.<br>The keys of <code>WeakMap</code> and <code>WeakSet</code> can be garbage-collected (for <code>WeakMap</code> objects, the values would then be eligible for Garbage-Collection as well) as long as nothing else in the program is referencing the key</p>
<p><strong>FinalizationRegistry</strong></p>
<p>listen to the garbage-collect event</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> registry = <span class="keyword">new</span> FinalizationRegistry(<span class="function"><span class="params">heldValue</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(heldValue)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: <span class="number">0</span> &#125;</span><br><span class="line">registry.register(obj, <span class="string">&quot;some value&quot;</span>); <span class="comment">// target and holdings cannot be same</span></span><br></pre></td></tr></table></figure>

<h4 id="memory-leak"><a href="#memory-leak" class="headerlink" title="memory leak"></a>memory leak</h4><ul>
<li><p>Out of DOM references. a DOM node that was once kept in an object, even after it’s removed from the DOM tree, still persists in that object.</p>
</li>
<li><p>timers or callbacks. Most of libraries provide observers and other facilities that take callbacks.</p>
</li>
<li><p>accidental global variables. cause <code>mark and sweep algorithm</code>, a variable which is mounted on <code>window</code> or <code>this</code> will not be considered  <code>garbage</code></p>
<ul>
<li>add ‘use strict’ can prevent this issue</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.variable = <span class="string">&quot;potential accidental global&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Foo called on its own, this points to the global object (window)</span></span><br><span class="line">foo();</span><br></pre></td></tr></table></figure>
</li>
<li><p>closure.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// seems fixed in the newly v8</span></span><br><span class="line"><span class="keyword">var</span> theThing = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> replaceThing = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// shared scope, shared with `unused` and `someMethod`. `unused` is never used, `someMethod` can be used through `theThing`. And as `someMethod` shares the closure scope with `unused`, even though `unused` is never used, its reference to `originalThing` forces it to stay active.</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> originalThing = theThing; <span class="comment">// holds the previous value of  `theThing`</span></span><br><span class="line">  <span class="keyword">var</span> unused = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// holds `originalThing`</span></span><br><span class="line">    <span class="keyword">if</span> (originalThing)</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;hi&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  theThing = &#123;</span><br><span class="line">    <span class="attr">longStr</span>: <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1000000</span>).join(<span class="string">&#x27;*&#x27;</span>),</span><br><span class="line">    <span class="attr">someMethod</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(someMessage);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">setInterval</span>(replaceThing, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h3 id="closure"><a href="#closure" class="headerlink" title="closure"></a>closure</h3><blockquote>
<p>closure is a combination created by binding a function to the lexical environment. it allows you to access the outside scope from the inner of a function.</p>
</blockquote>
<h4 id="advantages"><a href="#advantages" class="headerlink" title="advantages"></a>advantages</h4><ul>
<li><p><code>data privacy</code>. it means that you can’t access the data of the inner scope from the outside.</p>
</li>
<li><p><code>privileged methods</code>. the methods exposed by the function are privileged because they can access data in both the inner scope and the outer scope.</p>
</li>
<li><p><code>stateful function</code>. a state is a snapshot of the current environment, every change will take a picture of the current environment.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> func = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">3</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">b</span>) =&gt;</span> &#123;</span><br><span class="line">    a = ++ a</span><br><span class="line">    <span class="keyword">return</span> b * a</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> closure = func()</span><br><span class="line">closure(<span class="number">4</span>) <span class="comment">// 16</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>partial application</code> refers to the process of fixing a number of arguments to a function, producing another function that takes fewer arguments than the original function. it takes advantage of closure scope in order to fix arguments.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> partialApply = <span class="function">(<span class="params">fn, ...fixedArgs</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">...remainingArgs</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> fn.apply(<span class="built_in">this</span>, fixedArgs.concat(remainingArgs))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Function Factories</code>, to generate functions with pre-configured behavior or to create multiple functions with similar functionality. like debounce function</p>
</li>
<li><p><code>Memoization</code>, to cache the results of expensive function calls</p>
</li>
</ul>
<h4 id="Stale-closure"><a href="#Stale-closure" class="headerlink" title="Stale closure"></a>Stale closure</h4><p>a stale closure captures a variable whose value is outdated</p>
<ul>
<li><p><code>createIncrement</code> function returns two functions, <code>increment</code> and <code>log</code>. The former responsible for value increasing. the latter logs a <code>const</code>, whose value is fixed since it defined, then every time call the <code>log</code> fun, it gets <code>message</code> which has a outdated value.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createIncrement</span>(<span class="params">incBy</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> value = <span class="number">0</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">increment</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    value += incBy;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> message = <span class="string">`Current value is <span class="subst">$&#123;value&#125;</span>`</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(message);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> [increment, log];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> [increment, log] = createIncrement(<span class="number">1</span>);</span><br><span class="line">increment(); <span class="comment">// 1</span></span><br><span class="line">increment(); <span class="comment">// 2</span></span><br><span class="line">log(); <span class="comment">// Current value is 0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>When using <code>setTimeout</code> and <code>setInterval</code>, the function delays execution, but any variables saved within the function retain their values as they were at the time the function was defined. This means that if variables change during the delay time, the function only accesses the old values of those variables.</p>
</li>
</ul>
<h3 id="prototype"><a href="#prototype" class="headerlink" title="prototype"></a>prototype</h3><ul>
<li><p>every object has a <code>prototype</code>, from which objects inherit properties and methods</p>
</li>
<li><p>an instance inherits <code>prototype</code> from <code>constructor</code>, which is placed on the <code>__proto__</code></p>
</li>
<li><p>a <code>constructor</code> has a <code>prototype</code> which includes two properties <code>constructor</code> and <code>proto</code>. additionally, it inherit <code>proto</code> from <code>Object.prototype</code></p>
<ul>
<li>the <code>prototype.constructor</code> refer to the default constructor</li>
<li>even all the built-in functions such as Object, Function, Array、RegExp、Date、Boolean、Number、String , the <code>prototype.proto</code> of them point to the <code>Object.prototype</code>, that means they inherited are from <code>Object</code>, and <code>Object.prototype.proto</code> refer to null.</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype.constructor === Person <span class="comment">// Person is a constructor, Person.prototype.constructor point to the &quot;constructor&quot; function self</span></span><br><span class="line">person01.__proto__ == Person.prototype <span class="comment">// person01 is an instance, person01.__proto__  point to a place same as Person.prototype</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.__proto__ == <span class="built_in">Object</span>.prototype == <span class="built_in">Object</span>.prototype.__proto__ = <span class="literal">null</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="property-chain"><a href="#property-chain" class="headerlink" title="property chain"></a>property chain</h4><p>when we access an <code>object</code>‘s property, first the engine will try to find the property within the object itself. if it doesn’t find, it then look at the <code>object.__proto__</code>. if it still doesn’t find , it continues up the <code>__proto__</code> chain, checking each subsequent <code>__proto__</code>. until it find <code>Object.prototype</code>, in which the <code>prototype</code> is null, then the engine can conclude that the property doesn’t exist.</p>
<h4 id="diff-between-constructor-and-normal-function"><a href="#diff-between-constructor-and-normal-function" class="headerlink" title="diff between constructor and normal function"></a>diff between constructor and normal function</h4><ul>
<li><p>a <code>constructor</code> usually doesn’t use <code>return</code> keyword, because <code>this</code> of a <code>constructor</code> will be used as the result of <code>new</code> keyword.</p>
</li>
<li><p>when a <code>constructor</code> returns an object, that object will be used as the result returned by the <code>new</code> keyword. otherwise, if the result is a primitive type, then <code>this</code> will be returned by the <code>new</code> keyword.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Hello&quot;</span>; <span class="comment">// a primitive value</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person1 = <span class="keyword">new</span> Person(<span class="string">&quot;Alice&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(person1); <span class="comment">// Output: Person &#123; name: &quot;Alice&quot; &#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>by the first rule, <code>this</code> and <code>new</code> are used in a constructor but not in a normal function</p>
</li>
<li><p>what does NEW do?</p>
<ul>
<li>create an Object</li>
<li>bind <code>this</code> of the current scope to that object</li>
<li>copy the prototype from the constructor, and placed it in the <code>object._proto_</code></li>
<li>execute the code inside the constructor, and return the object</li>
</ul>
</li>
</ul>
<h4 id="Inheritance"><a href="#Inheritance" class="headerlink" title="Inheritance"></a>Inheritance</h4><ul>
<li>create a child object classes which will inherit features from another class</li>
<li>OO =&gt; object oriented programming</li>
<li>favor object composition over inheritance</li>
<li>concatenative inheritance, inherit features from another object by copying the source objects properties<ul>
<li>Object.assign()</li>
<li>… spread syntax</li>
<li>bind, call and apply(can receive an array). binding “this” to a function</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> beBound = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">let</span> beCalled = <span class="function"><span class="keyword">function</span> (<span class="params">...arg</span>) </span>&#123; <span class="built_in">console</span>.log(<span class="built_in">this</span>, arg )&#125;</span><br><span class="line"><span class="comment">// the first argument will be bound with the function, the others used as rest arguments</span></span><br><span class="line"><span class="comment">// return a function which are created by binding a copy of the first argument to the called function</span></span><br><span class="line"><span class="keyword">let</span> newOneFixedArgument = beCalled.bind(beBound, <span class="string">&quot;newOne&quot;</span>, <span class="string">&quot;fixedArgument&quot;</span>)</span><br><span class="line">newOneFixedArgument()</span><br><span class="line"><span class="keyword">let</span> newOneFreeArgument = beCalled.bind(beBound)</span><br><span class="line">newOneFreeArgument(<span class="string">&quot;newOne&quot;</span>, <span class="string">&quot;freeArgument&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// call and apply will execute the function immediately, and doesn&#x27;t change the called function</span></span><br><span class="line">beCalled.call(beBound, <span class="string">&quot;call&quot;</span>, <span class="string">&quot;individual arguments&quot;</span>)</span><br><span class="line">beCalled.apply(beBound, [<span class="string">&quot;apply&quot;</span>, <span class="string">&quot;array argument&quot;</span>]) <span class="comment">// accept an array</span></span><br></pre></td></tr></table></figure>

<h4 id="prototype-delegation"><a href="#prototype-delegation" class="headerlink" title="prototype delegation"></a>prototype delegation</h4><ul>
<li><code>new</code> constructor<ul>
<li>functional inheritance / factory function. It is not a constructor or class. Instead, it operates by generating an object from a factory and extending the produced object by assigning properties to it through concatenative inheritance.</li>
</ul>
</li>
<li>class extend / sub-classing.<br>inherit everything from a class, can’t choose what you wanted<br>this initialization by calling the parent’s constructor with super() and can pass arguments to the parent, while in the constructor function that the new keyword does the initialization automatically.</li>
</ul>
<h3 id="deep-and-shallow-copy"><a href="#deep-and-shallow-copy" class="headerlink" title="deep and shallow copy"></a>deep and shallow copy</h3><ul>
<li><p>basic data types: data are stored in <code>stack</code></p>
</li>
<li><p>reference data types: data are stored in <code>heap</code>, while <code>stack</code> only have object’s reference</p>
</li>
<li><p><code>shallow copy</code>: copy the reference of object</p>
</li>
<li><p><code>deep copy</code>: copy data</p>
</li>
<li><p>the following methods deep copy only the first layer of an object.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign(&#123;&#125;, state)</span><br><span class="line">&#123;...state&#125;</span><br><span class="line"><span class="built_in">Array</span>.prototype.concat()</span><br><span class="line"><span class="built_in">Array</span>.prototype.slice()</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><strong>completely deep copy</strong></p>
<ul>
<li><p><code>structuredClone()</code> creates a deep clone of a given value(include circular references). to clone <code>DOM element</code> <code>File</code>, <code>Map</code>, <code>Set</code>, and functions that are not part of the built-in objects, will result in an error or an incomplete copy</p>
</li>
<li><p><code>JSON.parse(JSON.stringify())</code>, some complex types will be translated into string:</p>
<ul>
<li><p><code>Dates</code>, <code>functions</code>, <code>undefined</code>, <code>Infinity</code>, <code>RegExps</code>, <code>Maps</code>, <code>Sets</code>, <code>Blobs</code>, <code>FileLists</code>, <code>ImageData</code>, <code>sparse Arrays</code>, <code>Typed Arrays</code></p>
</li>
<li><p><code>undefined</code> will be ignored</p>
</li>
<li><p>an object with circular references(properties are refer to each other) can’t be converted</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">b</span>: &#123;</span><br><span class="line">    <span class="attr">c</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">d</span>: <span class="number">3</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">f</span>: <span class="literal">undefined</span>,</span><br><span class="line">&#125;</span><br><span class="line">obj.c = obj.b</span><br><span class="line">obj.e = obj.a</span><br><span class="line">obj.b.c = obj.c</span><br><span class="line">obj.b.d = obj.b</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><code>MessageChannel</code>, data that is delivered <code>MessageChannel</code> are deep copied. but delivering a function will cause error</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; port1, port2 &#125; = <span class="keyword">new</span> MessageChannel()</span><br><span class="line">  port2.onmessage = <span class="function">(<span class="params">ev</span>) =&gt;</span> resolve(ev.data)</span><br><span class="line">  port1.postMessage(obj)</span><br><span class="line">&#125;)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> deepCopy(obj).then(<span class="function">(<span class="params">copy</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(copy);</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="event-loop"><a href="#event-loop" class="headerlink" title="event loop"></a>event loop</h3><ul>
<li><p><code>Heap and Stack?</code><br><code>Heap</code> refers to where objects are stored<br><code>Stack</code> refers to where functions are waiting to execute.</p>
</li>
<li><p><code>synchronous and asynchronous</code><br>they are two types of js tasks. <code>synchronous task</code> constitute <code>execution context stack(执行栈)</code> in the <code>Main-Thread</code>. <code>asynchronous task</code> wait in the <code>Task Queue</code>.</p>
</li>
<li><p><code>Event Loop</code><br>after all the tasks of <code>Task Queue</code> are completed, the engine continuously scans <code>task queue</code> to find tasks that can transition waiting status to execution. once such tasks are found, the engine pushes it into <code>execution context stack</code>. this process where JavaScript engine constantly scans for tasks is called as <code>Event Loop</code>.</p>
</li>
<li><p><code>Call Stack</code><br>every call of function will leave a <code>Call Frame（调用帧）</code>, which keeps the inner information about function including <strong>variables and the location where the function called</strong>,  those information will be deleted after the function is completed.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// put C into stack =&gt; B in =&gt; A in =&gt; A out =&gt; B out =&gt; C out</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">funA</span>(<span class="params"></span>) </span>&#123;  <span class="built_in">console</span>.log(<span class="string">&#x27;funA&#x27;</span>) &#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">funB</span>(<span class="params"></span>) </span>&#123; funA() &#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">funC</span>(<span class="params"></span>) </span>&#123; funB() &#125;</span><br><span class="line">funC()</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Task queue</code> have been divided into two types <code>Macro</code> and <code>Micro</code></p>
<ul>
<li><p><code>Macro tasks</code> include <code>setImmediate(Deprecated)</code> / <code>setTimeout</code> / <code>setInterval</code> / <code>MessageChannel</code> /<code>requestAnimationFrame</code> / <code>UI render</code>/ <code>I/O in node.js</code></p>
</li>
<li><p><code>Micro tasks</code> include the <code>onerror</code> and <code>then callback of Promise</code>.</p>
</li>
<li><p>setImmediate -&gt; MessageChannel -&gt; setTimeout 0</p>
</li>
<li><p>the engine checks <code>Macro Task</code> first and the <code>Micro Task</code> second.</p>
</li>
<li><p><code>Promise initialize and resolve are synchronous</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line"> <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="number">4</span>)</span><br><span class="line">   resolve(<span class="number">1</span>)</span><br><span class="line"> &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line"> ;(<span class="function"><span class="keyword">function</span> (<span class="params">j</span>) </span>&#123;</span><br><span class="line">   p1.then(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;promise then - &quot;</span> + j)</span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;)(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><code>async</code> <code>await</code>, look at the following example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;async1 start&#x27;</span>)</span><br><span class="line">  <span class="keyword">await</span> async2()</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;async1 end&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;async2&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;script start&#x27;</span>)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;setTimeout&#x27;</span>)</span><br><span class="line">&#125;,<span class="number">0</span>)</span><br><span class="line">async1();</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;promise1&#x27;</span>)</span><br><span class="line">  resolve();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;promise2&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;script end&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><code>async1()</code> doesn’t have <code>await</code> prefix, <code>async1</code> will be translated by v8 like:</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// `async2` is Promise initialization, so it‘s a synchronous</span></span><br><span class="line"> <span class="comment">// the code after `await` will be put in `then` callback</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;async1 start&#x27;</span>)</span><br><span class="line">  <span class="built_in">Promise</span>.resolve(async2).then(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;async1 end&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Tail Call 尾调用</code> refers to calling another function “at the end” of a function’s execution.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">x</span>) </span>&#123; <span class="keyword">return</span> b(x) &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>b</code> is a <code>Tail Call</code>. given <code>Call Stack</code>, when a function is called, it creates a <code>Call Frame</code> that holds internal information until the call is completed. while <code>Tail Call</code> is the final action, the <code>Call Frame</code> will be kept until <code>Tail Call</code> is finished.</li>
<li>optimize <code>Tail Call</code> to reduce stack space usage, is called <code>Tail call optimization</code>.</li>
</ul>
</li>
<li><p><code>Tail Recursion</code><br>due tof <code>call frame</code>, <code>Recursion</code> often consumes a significant amount of memory and results <code>stack overflow</code><br>in languages that support <code>Tail call optimization</code>, <code>Tail Recursion</code> can be used to avoid such issues</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// the recursive call is the last operation performed by the function</span></span><br><span class="line"> <span class="comment">// the call frame associated with that recursive call can be discarded or reused. </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">n, acc = <span class="number">1</span></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (n === <span class="number">0</span>) <span class="keyword">return</span> acc;</span><br><span class="line">   <span class="keyword">return</span> factorial(n - <span class="number">1</span>, n * acc); <span class="comment">// Tail recursion</span></span><br><span class="line"> &#125;</span><br><span class="line"> <span class="built_in">console</span>.log(factorial(<span class="number">5</span>)); <span class="comment">// Output: 120</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="debounce-and-throttle"><a href="#debounce-and-throttle" class="headerlink" title="debounce and throttle"></a>debounce and throttle</h3><ul>
<li><p><code>debounce</code>. a function can be executed when it is not called during a specific time</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// execute debounce =&gt; got a function which bound with the debounce scope</span></span><br><span class="line"><span class="comment">// every time the instance executed that will clean and reassign the timer</span></span><br><span class="line"><span class="keyword">const</span> debounce = <span class="function">(<span class="params">func, delay</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> timer</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> context = <span class="built_in">this</span>, args = <span class="built_in">arguments</span></span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer) <span class="comment">// to clean before reassign</span></span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> func.apply(context, args), delay)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> instance = debounce(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">&quot;executing&quot;</span>) &#125;, <span class="number">3000</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>throttle</code>. a function can be executed only when the time is up</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// execute throttle =&gt; got a function which bound with the throttle scope</span></span><br><span class="line"><span class="comment">//when the isExpired is true, that means that the function can be executed and when it executed, then change the isExpired&#x27;s state to false and set a time to change back</span></span><br><span class="line">  <span class="keyword">const</span> throttle = <span class="function">(<span class="params">func, delay</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> isExpired = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">const</span> context = <span class="built_in">this</span></span><br><span class="line">            <span class="keyword">const</span> args = <span class="built_in">arguments</span></span><br><span class="line">            <span class="keyword">if</span> (isExpired === <span class="literal">false</span>) <span class="keyword">return</span></span><br><span class="line">            func.apply(context, args)</span><br><span class="line">            isExpired = <span class="literal">false</span></span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> isExpired = <span class="literal">true</span>, delay)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> instance = throttle(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">&quot;executing&quot;</span>) &#125;, <span class="number">3000</span>)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="breakpoint-resume"><a href="#breakpoint-resume" class="headerlink" title="breakpoint resume"></a>breakpoint resume</h3><p>web: fileReader + slice + FormData<br>server: createWriteStream + createReadStream</p>
<h3 id="messageChannel"><a href="#messageChannel" class="headerlink" title="messageChannel"></a>messageChannel</h3><ul>
<li>to communicate between two <code>iframe</code>s / <code>web worker</code>s / <code>js module</code>s</li>
<li>deep copy</li>
</ul>
<h3 id="generator"><a href="#generator" class="headerlink" title="generator"></a>generator</h3><p>use <code>generator</code> to simulate async function</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params">fn: any</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> gen = fn()</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">thunk</span>(<span class="params">...argu: any[]</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">const</span> res = gen.next(...argu)</span><br><span class="line">		<span class="keyword">if</span> (res.done) <span class="keyword">return</span></span><br><span class="line">		<span class="keyword">if</span> (res.value <span class="keyword">instanceof</span> <span class="built_in">Promise</span>) &#123;</span><br><span class="line">			res.value.then(<span class="function">(<span class="params">res: any</span>) =&gt;</span> thunk(res))</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	thunk()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> gen = <span class="function"><span class="keyword">function</span>* (<span class="params"></span>): <span class="title">Generator</span>&lt;<span class="title">any</span>, <span class="title">any</span>&gt; </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> a = <span class="keyword">yield</span> get(&#123; <span class="attr">api</span>: <span class="string">&quot;manifest.json&quot;</span>, <span class="attr">params</span>: &#123; <span class="attr">tenant</span>: <span class="string">&quot;devices&quot;</span> &#125;, <span class="attr">options</span>: &#123; <span class="attr">sync</span>: <span class="literal">false</span> &#125; &#125;)</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&quot;a&quot;</span>, a)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> b = <span class="keyword">yield</span> get(&#123;</span><br><span class="line">		<span class="attr">api</span>: <span class="string">&quot;manifest.json&quot;</span>,</span><br><span class="line">		<span class="attr">params</span>: &#123; <span class="attr">tenant</span>: <span class="string">&quot;devices&quot;</span> &#125;,</span><br><span class="line">		<span class="attr">options</span>: &#123;</span><br><span class="line">			<span class="attr">sync</span>: <span class="literal">false</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(b)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">run(gen)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="vue-vs-react"><a href="#vue-vs-react" class="headerlink" title="vue vs react"></a>vue vs react</h3><p>both of them are component-based architecture</p>
<p><strong>Vue</strong></p>
<ul>
<li>considered easier to learn for beginners due to its simpler syntax and clear documentation.</li>
<li>use a Single File Component (SFC) which contains a template section for HTML markup, a script section for JavaScript logic, and a style section for CSS.</li>
<li>has a growing community, most libraries are developed by the official team.</li>
<li>has a powerful two-way data binding system, keeping data and the UI in sync.</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- The input value is bound to the &#x27;msg&#x27; data property --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;msg&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>React</strong></p>
<ul>
<li>has a steeper learning curve due to its extensive ecosystem and more complex concepts.</li>
<li>uses JSX (JavaScript XML), this allows to write HTML-like code in js files. JSX may be more powerful and expressive.</li>
<li>has a larger ecosystem and community support, with many third-party libraries and tools available.</li>
<li>follows a one-way data flow, explicitly manage state and re-render components when needed.</li>
<li>data flows in a one-way direction, from outside to inside, and from top to bottom. this ensures a simple and predictable data flow</li>
</ul>
<p>the differences between <strong>class component and function component</strong> can considered as the difference between vue and react. since vue uses class component</p>
<ul>
<li>no <code>this</code> issues in function components, you don’t have to do scope bonding</li>
<li>code lesser with function component, but worse maintaining</li>
<li>doesn’t need to manage state and life cycle</li>
</ul>
<h3 id="architectural-patterns"><a href="#architectural-patterns" class="headerlink" title="architectural patterns"></a>architectural patterns</h3><h4 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h4><ul>
<li>Model - View - Controller</li>
<li><code>model</code> contains data model, and describes how the data can be changed and manipulated.</li>
<li><code>view</code> is UI components. it receives data from the model (via the controller) and display it to the user.</li>
<li><code>controller</code> sits between <code>model</code> and <code>view</code>, processing the data from the <code>model</code> and passing back to the <code>view</code> for rendering.</li>
<li>view and model can interact with each other directly, so it’s <strong>coupled</strong>.</li>
</ul>
<h4 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h4><ul>
<li>Model – View – ViewModel</li>
<li><code>view</code> and <code>model</code> are same as in <code>MVC</code></li>
<li><code>ViewModel</code> sits below the UI layer, acts as a bridge between the View and Model. Unlike the Controller in MVC, it doesn’t handle user interactions directly. it binds data between the View and Model, and ensures that the View reflects the state of the Model and vice versa.</li>
<li><code>view</code> and <code>model</code> can’t interact with each other, it’s <strong>decoupled</strong>.</li>
<li>vue and react can be vm or mvvm, early Angular is mvc.</li>
</ul>
<h4 id="active-view-and-passive-view"><a href="#active-view-and-passive-view" class="headerlink" title="active view and passive view"></a>active view and passive view</h4><ul>
<li>the later only outputs UI and doesn’t accept user’s input, contains zero logic</li>
<li>the former contains events, data binging, and behaviors</li>
</ul>
<h2 id="Typescript"><a href="#Typescript" class="headerlink" title="Typescript"></a>Typescript</h2><h3 id="references"><a href="#references" class="headerlink" title="references"></a>references</h3><p>setting tsconfig for specific file</p>
<h3 id="diff-with-js"><a href="#diff-with-js" class="headerlink" title="diff with js"></a>diff with js</h3><p><strong>pro</strong></p>
<ul>
<li>object-orient langua==ge static type checking.  it can find low level bugs, like spelling mistake, incorrect or instanceof variable properties</li>
<li>type infer.</li>
<li>optional parameters</li>
<li>enum support</li>
<li>better support in IDE, like intelliSense of editor, auto-supplement</li>
<li>the type files can increase code reading ability, and make the project maintaining easer</li>
<li><code>.d.ts</code> can be viewed as specifications</li>
<li>to identify incompatible interfaces when the field name changed</li>
</ul>
<p><strong>con</strong></p>
<ul>
<li>compiling step is required, and it may take a long time.</li>
<li>abstract class is not support</li>
<li>definition files for a third library is required</li>
<li>pollutes the code with type gymnastics</li>
</ul>
<h3 id="type-judgement"><a href="#type-judgement" class="headerlink" title="type judgement"></a>type judgement</h3><ul>
<li><p>Generics</p>
</li>
<li><p>keyof</p>
</li>
<li><p>typeof</p>
</li>
<li><p>indexed access: <code>User[&quot;name]</code></p>
</li>
<li><p>map types, use <code>-</code> or <code>+</code> to remove readonly or optional modifier</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> OptionsFlags&lt;Type&gt; = &#123;</span><br><span class="line">  [Property <span class="keyword">in</span> keyof Type]: Type[Property]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// change all readonly or optional properties to normal</span></span><br><span class="line"><span class="keyword">type</span> CreateMutable&lt;Type&gt; = &#123;</span><br><span class="line">  -<span class="keyword">readonly</span> [Property <span class="keyword">in</span> keyof Type]: Type[Property];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">type</span> Concrete&lt;Type&gt; = &#123;</span><br><span class="line">  [Property <span class="keyword">in</span> keyof Type]-?: Type[Property];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Diff-of-null-and-undefined"><a href="#Diff-of-null-and-undefined" class="headerlink" title="Diff of null and undefined"></a>Diff of <code>null</code> and <code>undefined</code></h3><ul>
<li><code>null</code> means an absence of value</li>
<li><code>undefined</code> means not initialized</li>
</ul>
<h3 id="Diff-of-ts-and-d-ts"><a href="#Diff-of-ts-and-d-ts" class="headerlink" title="Diff of .ts and .d.ts"></a>Diff of <code>.ts</code> and <code>.d.ts</code></h3><ul>
<li><code>.d.ts</code> file is a declaration file, and would not be complied as a <code>js</code> file<ul>
<li>in a <code>.d.ts</code> file, if we want it act as a global declaration, then we have to use <code>/// Triple-Slash Directives</code> to import dependencies</li>
<li><code>/// &lt;reference types=&quot;node&quot; /&gt;</code> is used for importing an outside module, while <code>/// &lt;reference types=&quot;./global.d.ts&quot; /&gt;</code> is for importing a local <code>declaration</code> file</li>
</ul>
</li>
</ul>
<h3 id="Diff-of-type-and-interface"><a href="#Diff-of-type-and-interface" class="headerlink" title="Diff of type and interface"></a>Diff of <code>type</code> and <code>interface</code></h3><ul>
<li><p><code>type</code> is used to declare a type alias, act like a variable. while interface introduce a named object type.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// get the type of a variable to deduct (a part) of a payment from (the total)</span></span><br><span class="line"><span class="keyword">let</span> div = <span class="built_in">document</span>.createElement(<span class="string">&quot;div&quot;</span>)</span><br><span class="line"><span class="keyword">type</span> B = <span class="keyword">typeof</span> div</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>interface</code>, can be declared repeatedly, but a <code>type</code> <strong>cannot</strong></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> User &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  age: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> User &#123;</span><br><span class="line">  <span class="attr">sex</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* &#123; name: string;  age: number; sex: string  &#125; */</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="features"><a href="#features" class="headerlink" title="features"></a>features</h3><ul>
<li><p>circular references</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> LocalRes&lt;T&gt; &#123; [x: <span class="built_in">string</span>]: T &#125;</span><br><span class="line"><span class="keyword">type</span> LocalResPackage = LocalRes&lt;LocalResPackage | <span class="built_in">string</span>&gt; </span><br></pre></td></tr></table></figure>
</li>
<li><p><code>new</code>  describe the shape of a constructor</p>
</li>
<li><p><code>abstract</code> to mark a class with <code>abstract</code>, means that the class is only meant to be extended from, can’t be used directly</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="keyword">abstract</span> getArea(): <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Shape(); <span class="comment">// error Cannot create an instance of an abstract class.</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;&#125;</span><br><span class="line"><span class="keyword">new</span> Square(<span class="number">3</span>) <span class="comment">// right</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>extends</code>  conditional types<br><code>SomeType extends OtherType ? TrueType : FalseType;</code></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// if Dog extends from Animal, then Example = number, otherwise Example = string</span></span><br><span class="line"><span class="keyword">type</span> Example = Dog <span class="keyword">extends</span> Animal ? <span class="built_in">number</span> : <span class="built_in">string</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>infer</code><br>can be used to unpack type, to get the item’s type of an array, the return value’s type or the parameter’s type of a function</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// if T is a function ? the return value of the function : any</span></span><br><span class="line"><span class="keyword">type</span> Unpack&lt;T&gt; = T <span class="keyword">extends</span> (...args: <span class="built_in">any</span>[]) =&gt; infer R ? R : <span class="built_in">any</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// if T is an Array ? R : T</span></span><br><span class="line"><span class="keyword">type</span> Unpack&lt;T&gt; = T <span class="keyword">extends</span> <span class="built_in">Array</span>&lt;infer R&gt; ? R : T</span><br><span class="line"></span><br><span class="line"><span class="comment">// if R is Reducer ? Reducer&#x27;s first parameter S : never</span></span><br><span class="line"><span class="keyword">type</span> ReducerState&lt;R <span class="keyword">extends</span> Reducer&lt;<span class="built_in">any</span>, <span class="built_in">any</span>&gt;&gt; = R <span class="keyword">extends</span> Reducer&lt;infer S, <span class="built_in">any</span>&gt; ? S : <span class="built_in">never</span>;</span><br><span class="line"><span class="keyword">type</span> Reducer&lt;S, A&gt; = <span class="function">(<span class="params">prevState: S, action: A</span>) =&gt;</span> S;</span><br><span class="line"></span><br><span class="line"><span class="comment">// get the parameter type of a constructor</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractClass</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">a: <span class="built_in">string</span>, b: <span class="built_in">number</span></span>)</span> &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> InferAbstract&lt;T&gt; = T <span class="keyword">extends</span> <span class="keyword">abstract</span> <span class="keyword">new</span> (...args: infer Args) =&gt; infer _ ? Args : <span class="built_in">never</span>; <span class="comment">// new a function which return a value,  infer the parameter as Args, mark the value as abstract class, if T is a abstract class ?  Args : never</span></span><br><span class="line"><span class="keyword">type</span> Result = InferAbstract&lt;<span class="keyword">typeof</span> AbstractClass&gt; <span class="comment">// [a: string, b: number]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>decorators, use the form <code>@expression</code>, where the expression must infer to a function.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">first</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;first(): factory evaluated&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">target: any, propertyKey: string, descriptor: PropertyDescriptor</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;first(): called&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">second</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;second(): factory evaluated&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">target: any, propertyKey: string, descriptor: PropertyDescriptor</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;second(): called&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">ExampleClass</span> </span>&#123;</span><br><span class="line">@first()</span><br><span class="line">@second()</span><br><span class="line"><span class="function"><span class="title">method</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Record</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> type AnyObject = Record&lt;string, any&gt;</span><br><span class="line"> type Coord = Record&lt;<span class="string">&quot;x&quot;</span> | <span class="string">&quot;y&quot;</span>, number&gt;</span><br><span class="line"> type Coord = &#123;</span><br><span class="line"><span class="attr">x</span>: number,</span><br><span class="line"><span class="attr">y</span>: number,e</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Readonly</code> <code>Partial</code> <code>Required</code>: all the properties are Readonly or selectable or required</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type Coord = Partial&lt;Record&lt;<span class="string">&quot;x&quot;</span> | <span class="string">&quot;y&quot;</span>, number&gt;&gt;</span><br><span class="line">type Coord = &#123;</span><br><span class="line">  x?: number,</span><br><span class="line">  y?: number,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Pick</code> <code>omit</code>: to pick or omit some properties from a given type</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Coord = Record&lt;<span class="string">&quot;x&quot;</span> | <span class="string">&quot;y&quot;</span>, <span class="built_in">number</span>&gt;</span><br><span class="line"><span class="keyword">type</span> CoordX = Pick&lt;Coord, <span class="string">&quot;x&quot;</span>&gt;</span><br><span class="line"><span class="keyword">type</span> CoordX = Omit&lt;Coord, <span class="string">&quot;x&quot;</span>&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>ReturnType</code> <code>Parameters</code>, the former is used for getting the output of a function, while the later is used for a function’s input</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> timer: ReturnType&lt;<span class="keyword">typeof</span> <span class="built_in">setTimeout</span>&gt;</span><br><span class="line">Parameters&lt;<span class="function">(<span class="params">props: Event</span>) =&gt;</span> <span class="built_in">void</span>&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>typeof</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> zed: Hero = &#123; <span class="attr">name</span>: <span class="string">&quot;影流之主&quot;</span>, <span class="attr">skill</span>: <span class="string">&quot;影子&quot;</span> &#125;;</span><br><span class="line">type LOL = <span class="keyword">typeof</span> zed; <span class="comment">// type LOL = Hero</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>keyof</code> collecting key</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123; <span class="attr">name</span>: string; age: number;  location: string; &#125;</span><br><span class="line">type K1 = keyof Person; <span class="comment">// &quot;name&quot; | &quot;age&quot; | &quot;location&quot;</span></span><br><span class="line">type K2 = keyof Person[];  <span class="comment">// number | &quot;length&quot; | &quot;push&quot;|&quot;concat&quot; | ...</span></span><br><span class="line">type K3 = keyof &#123; [x: string]: Person &#125;;  <span class="comment">// string | number</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>enums</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">enum Themes &#123;</span><br><span class="line"><span class="keyword">default</span> = <span class="string">&quot;_default&quot;</span>,</span><br><span class="line">thinkuem = <span class="string">&quot;_thinkuem&quot;</span>,</span><br><span class="line">safeuem = <span class="string">&quot;_safeuem&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// collect all the values of an enum, but the types of all the values will be inferred as string, even some values are number or string</span></span><br><span class="line">type ThemesVal = <span class="string">`<span class="subst">$&#123;Themes&#125;</span>`</span></span><br><span class="line"><span class="comment">// generate a interface</span></span><br><span class="line">type ThemesVal = Record&lt;Themes, string&gt;</span><br><span class="line"><span class="comment">// collect all the keys of a enum</span></span><br><span class="line">type ThemesVal = keyof <span class="keyword">typeof</span> Themes</span><br></pre></td></tr></table></figure>
</li>
<li><p>template literal type，a set of every possible string literal that could be represented by each union member</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type a = <span class="number">1</span> | <span class="number">2</span> | <span class="number">3</span></span><br><span class="line">type b = <span class="number">4</span> | <span class="number">5</span> | <span class="number">6</span></span><br><span class="line">type ab = <span class="string">`<span class="subst">$&#123;a&#125;</span>_<span class="subst">$&#123;b&#125;</span>`</span> <span class="comment">//  &quot;1_4&quot; | &quot;1_5&quot; | &quot;1_6&quot; | &quot;2_4&quot; | &quot;2_5&quot; | &quot;2_6&quot; | &quot;3_4&quot; | &quot;3_5&quot; | &quot;3_6&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>template literal</code> has four convenient features <code>Uppercase</code> <code>Lowercase</code> <code>Capitalize</code> <code>Uncapitalize</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type PropEventSource&lt;Type&gt; = &#123;</span><br><span class="line"> on(eventName: <span class="string">`<span class="subst">$&#123;string &amp; keyof Type&#125;</span>Changed`</span>, <span class="attr">callback</span>: <span class="function">(<span class="params">newValue: any</span>) =&gt;</span> <span class="keyword">void</span>): <span class="keyword">void</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>type assertion, <code>as</code> or <code>&lt;&gt;</code> syntax</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> value: unknown = <span class="string">&quot;Foo&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> len: number = (value <span class="keyword">as</span> string).length;</span><br><span class="line"><span class="keyword">let</span> len: number = (&lt;string&gt;value).length;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>is</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">arg: string</span>): <span class="title">arg</span> <span class="title">is</span> <span class="title">MyType</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>in</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;model&#x27;</span> <span class="keyword">in</span> car);  <span class="comment">// boolean</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>this</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">Box</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">value?: T;</span><br><span class="line"></span><br><span class="line">hasValue(): <span class="built_in">this</span> is &#123; <span class="attr">value</span>: T &#125; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.value !== <span class="literal">undefined</span>;</span><br><span class="line">&#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>as const</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = [<span class="number">0</span>, <span class="number">1</span>] <span class="keyword">as</span> <span class="keyword">const</span>; <span class="comment">// let x: [0,1]</span></span><br><span class="line"><span class="comment">// another write pattern:   let x = &lt;const&gt;[0, 1];</span></span><br><span class="line"><span class="keyword">let</span> x = [<span class="number">0</span>,<span class="number">1</span>] <span class="comment">// let x: number[]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> y = [<span class="number">10</span>, <span class="number">20</span>] <span class="keyword">as</span> <span class="keyword">const</span>; <span class="comment">// Type &#x27;readonly [10, 20]&#x27;</span></span><br><span class="line"><span class="keyword">let</span> z = &#123; <span class="attr">text</span>: <span class="string">&quot;hello&quot;</span> &#125; <span class="keyword">as</span> <span class="keyword">const</span>; <span class="comment">// Type &#x27;&#123; readonly text: &quot;hello&quot; &#125;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>any</code> <code>extends object</code> instead of <code>any</code> when reference to an object</p>
</li>
<li><p><code>void</code> is used when a function’s output is <code>null</code> or <code>undefined</code>, if a fun does not use <code>return</code> keyword then its value is <code>undefined</code></p>
</li>
<li><p><code>unknown</code> is a type-safe of any type. you can narrow down <code>unknow</code> to any type by type assertion</p>
</li>
<li><p><code>never</code> is used when a function can’t end which means it can’t return a value even an undefined. <strong>to express an empty object</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">object</span>, <span class="title">K</span> <span class="title">extends</span> <span class="title">keyof</span> <span class="title">T</span>&gt;(<span class="params">o: T, name: K</span>): <span class="title">T</span>[<span class="title">K</span>] </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> o[name]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> foo: unknown = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> bar: string = foo <span class="keyword">as</span> string;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">data: LoginForm</span>): <span class="title">void</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">data: LoginForm</span>): <span class="title">never</span> </span>&#123;</span><br><span class="line"> <span class="keyword">while</span> (<span class="literal">true</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">data: LoginForm</span>): <span class="title">never</span> </span>&#123;</span><br><span class="line"> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type EmptyObject = Record&lt;string, never&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>map types</code>, to generate a type According to a map object, and can be a <code>generics</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> type OptionsFlags&lt;Type&gt; = &#123;</span><br><span class="line">[Property <span class="keyword">in</span> keyof Type]: boolean;</span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>index access</code> for looking up a specific property of a type</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type Age = Person[<span class="string">&quot;age&quot;</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>generics</code> generate a type with a specific params</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">identity</span>&lt;<span class="title">T</span>&gt;(<span class="params">arg: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> arg</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">let</span> myIdentity: &lt;Type&gt;<span class="function">(<span class="params">arg: Type</span>) =&gt;</span> Type = identity</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>implements</code>, to check that whether a class is satisfied the contract specified by one or above interfaces</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> interface Runnable &#123;</span><br><span class="line">run(): <span class="keyword">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">Job</span> <span class="title">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="title">run</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;running the scheduled job!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>triple slash directives, to introduce other files in the compiling process</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/// <span class="tag">&lt;<span class="name">reference</span> <span class="attr">path</span>=<span class="string">&quot;...&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>class modifiers</p>
<ul>
<li>public</li>
<li>protected: All the members of the class and its child classes can access them, But not the instance of the class.</li>
<li>private: Only the members of the class can access them.</li>
</ul>
</li>
</ul>
<h3 id="useful-tricks"><a href="#useful-tricks" class="headerlink" title="useful tricks"></a>useful tricks</h3><ul>
<li><p><code>reduce</code> method needs to provide the initial type and the return type when the return type is not same with the type of array item</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reduce&lt; [string, Lan], &#123; [k: string]: Lan &#125;&gt;(<span class="function">(<span class="params">a, c</span>) =&gt;</span> &#123;&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>refer to React component</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span>() =&gt; React.Component&lt;any, any&gt;</span><br><span class="line"><span class="keyword">typeof</span> React.Component</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>promise type</code>, the argument’s type of <code>resolve</code> is number, while the argument’s type of <code>reject</code> is infer to any</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">arg: string</span>): <span class="title">Promise</span>&lt;<span class="title">number</span>&gt; </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>&lt;number&gt;(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  arg === <span class="string">&quot;a&quot;</span> ? resolve(<span class="number">1</span>) : reject(<span class="string">&quot;1&quot;</span>);</span><br><span class="line"> &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>the resolve type of promise</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type resolve = Awaited&lt;ReturnType&lt;<span class="keyword">typeof</span> drawSlogan&gt;&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>to override a property of a interface extended</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">interface ColorPickerProps <span class="keyword">extends</span> Omit&lt;BasicProps&lt;string&gt;, <span class="string">&quot;change&quot;</span>&gt; &#123;</span><br><span class="line">  <span class="attr">change</span>: <span class="keyword">import</span>(<span class="string">&quot;react-color&quot;</span>).ColorChangeHandler</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>use <code>map</code> and <code>literal</code> to create new property names</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type Getters&lt;Type&gt; = &#123;</span><br><span class="line"> [Property <span class="keyword">in</span> keyof Type <span class="keyword">as</span> <span class="string">`get<span class="subst">$&#123;Capitalize&lt;string &amp; Property&gt;&#125;</span>`</span>]: <span class="function">() =&gt;</span> Type[Property]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>to extend html attributes</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">declare <span class="built_in">module</span> <span class="string">&quot;react&quot;</span> &#123;</span><br><span class="line">  interface DOMAttributes&lt;T&gt; &#123;</span><br><span class="line">	name?: string</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><h3 id="life-cycle"><a href="#life-cycle" class="headerlink" title="life cycle"></a>life cycle</h3><ul>
<li><p><strong>Mount Phase</strong></p>
<ul>
<li><p>initialize<br><code>constructor</code><br>inside the function</p>
</li>
<li><p>before render<br><code>getDerivedStateFromProps</code>, React will call it right before calling render, both on the initial mount and on subsequent updates. It should return an object to update the state, or null to update nothing.<br>inside the function to compare the state and then return what you want</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ScrollView</span>(<span class="params">&#123;row&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [isScrollingDown, setIsScrollingDown] = useState(<span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">const</span> [prevRow, setPrevRow] = useState(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (row !== prevRow) &#123;</span><br><span class="line">	  setIsScrollingDown(prevRow !== <span class="literal">null</span> &amp;&amp; row &gt; prevRow);</span><br><span class="line">	  setPrevRow(row);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`Scrolling down: <span class="subst">$&#123;isScrollingDown&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>rendering</p>
</li>
<li><p>after render<br><code>componentDidMount</code><br><code>useEffect()</code> with empty dependency array</p>
</li>
</ul>
</li>
<li><p><strong>Update Phase</strong></p>
<ul>
<li><p><code>getDerivedStateFromProps</code></p>
</li>
<li><p><code>shouldComponentUpdate</code><br>use <code>useMemo</code> to shallowly compare</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyComponent will only re-render if the value prop changes</span></span><br><span class="line">  <span class="keyword">const</span> MyComponent = React.memo(<span class="function">(<span class="params">&#123; value &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// Component logic</span></span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;value&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>render</p>
</li>
<li><p><code>getSnapshotBeforeUpdate</code>(1.contain state before update and after update，2.used to comparative calculations，3. in the end, it could return a value as the third argument of - DidUpdate)<br>use <code>useRef</code> to get the old and new state</p>
</li>
<li><p><code>componentDidUpdate</code><br><code>useEffect()</code> with watched data</p>
</li>
</ul>
</li>
<li><p><strong>unmount stage</strong><br><code>componentWillUnmount</code><br>the returned function of <code>useEffect()</code></p>
</li>
<li><p><strong>Error Handling</strong><br><code>getDerivedStateFromError(error)</code>: when there is an error during rendering, allowing the component to capture an error in its children.<br><code>componentDidCatch(error, info)</code>: when an error has been thrown by a descendant component. It is used to log error information and display a fallback UI.</p>
</li>
</ul>
<h3 id="change-view"><a href="#change-view" class="headerlink" title="change view"></a>change view</h3><p><strong>change props</strong><br>In React, data flows in a one-way direction, from outside to inside, and from top to bottom. To ensure this simple and predictable data flow, props are kept read-only</p>
<p><strong>useState() useReducer()</strong> hooks</p>
<ul>
<li><p>the process<br>setState(partialState) =&gt; merges <code>partialState</code> into the current state<br>=&gt; if <code>isBatchingUpdates === true</code>(is react in the batch updating status), then push this update into <code>_pendingStateQueue</code>(the queue of pending updates) , else set <code>isBatchingUpdates = true</code> and re-call the previous step<br>=&gt; call <code>waper()</code> to iterate <code>_pendingStateQueue</code> to execute update<br>=&gt; <code>componentWillReceiveProps</code><br>=&gt; to merge the states to get the new state<br>=&gt; <code>componentShouldUpdate</code>, and then determines whether to continue the update process<br>=&gt; <code>componentWillUpdate</code><br>=&gt; <code>render</code><br>=&gt; <code>componentDidUpdate</code></p>
</li>
<li><p>the data will not update immediately when we call <code>setState</code>, multiple updates from different components will be merged into a single re-render. that’s because if <code>isBatchingUpdates === true</code>, this means react still in it’s updating mechanism, then the upcoming updates will push into <code>_pendingStateQueue</code></p>
</li>
<li><p>even an empty object like <code>this.setState(&#123;&#125;)</code> will also trigger a new update cycle</p>
</li>
<li><p>the updated data can be achieved in callback</p>
</li>
<li><p>to step over React asynchronous behavior and achieve a sync response with ways of <code>setTimeout</code> or native events</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123; <span class="attr">number</span>: <span class="number">3</span> &#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.state.number) <span class="comment">// 3</span></span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">document</span>.body.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="built_in">this</span>.changeVal, <span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>context</strong>, this is shallowly compare<br><strong>forceUpdate()</strong>, only support in class component and it will skip <code>shouldComponentUpdate()</code><br><strong>change state</strong> in redux<br>*<em>change dom</em> with ways like <code>ref</code> or <code>native dom handlers</code></p>
<h3 id="components-conversation"><a href="#components-conversation" class="headerlink" title="components conversation"></a>components conversation</h3><ul>
<li>parent to children: props</li>
<li>children to parent: callbacks inside the parent props</li>
<li>between brother: find the common parent node, and then use the above methods</li>
<li>cross layer: by context</li>
<li>redux</li>
<li>import module and to interact in the module scope</li>
</ul>
<h3 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h3><p>jsx will be translated by babel to `React.createElement()</p>
<h3 id="high-order-component"><a href="#high-order-component" class="headerlink" title="high order component"></a>high order component</h3><ul>
<li>HOC is a function, that accepts a component and other arguments, and returns a new component that should maintain a similar interface with the original one.</li>
<li>HOC’s name begins with <code>with</code>, such as <code>withButton</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type HOC = <span class="function">(<span class="params">component: React.component, props</span>) =&gt;</span> React.component</span><br></pre></td></tr></table></figure>

<p><strong>features</strong></p>
<ul>
<li>It allows for the addition or modification of the props of a component, enabling us to handle complex or dirty business logic without affecting the original component.</li>
<li>unifying the data source. such as <code>connect</code> in redux.</li>
<li>to renders different components based on data. e.g., rendering after login can help avoid setting up multiple routers.</li>
<li>If multiple components have the same dependencies, instead of importing the function into each component separately, we can apply the function to different components using HOC</li>
<li><code>container</code> and <code>component</code>. The former handles logic, while the latter receives props from <code>container</code> and is only responsible for rendering.</li>
</ul>
<h3 id="Render-Props"><a href="#Render-Props" class="headerlink" title="Render Props"></a>Render Props</h3><ul>
<li>it is a mode, a component with <code>a callback</code> which accepts component’s data and return React elements</li>
<li>tips: try not use <code>Render Props</code> with <code>pureComponent</code>, because <code>this callback</code> will return a new value after parent re-render. while <code>pureComponent</code> is shadow compare for reduce the times of children re-render, but with <code>Render Props</code> the result of compare will always be false.</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;DataProvider render=&#123;<span class="function"><span class="params">data</span> =&gt;</span> (</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello &#123;data.target&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">)&#125;/&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> DataProvider = <span class="function">(<span class="params">props</span>) =&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.props.render(this.state)&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>render prop</code> is kind of a simply <code>HOC</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Mouse render=&#123;<span class="function"><span class="params">mouse</span> =&gt;</span> <span class="xml"><span class="tag">&lt;<span class="name">Component</span> &#123;<span class="attr">...this.props</span>&#125; <span class="attr">mouse</span>=<span class="string">&#123;mouse&#125;</span> /&gt;</span></span>&#125;/&gt;</span><br></pre></td></tr></table></figure>

<h3 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h3><ul>
<li>ref is a way for accessing dom</li>
<li>create ref by <code>React.createRef()</code> or <code>useRef()</code></li>
<li>it is not support to access <code>ref</code> directly on a <code>function component</code> which does <strong>not have ref instance</strong>.</li>
</ul>
<h4 id="callback-ref"><a href="#callback-ref" class="headerlink" title="callback ref"></a>callback ref</h4><ul>
<li>differ from <code>React.createRef()</code>, pass a function to components is also allowed</li>
<li>a better way is use with <code>useCallback()</code> hook, then it wouldn’t be executed every time after component updated</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> inputRef = <span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</span><br><span class="line"> <span class="comment">// argument is a dom element during mount</span></span><br><span class="line"> <span class="comment">// argument is null when unmount</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> inputRef = useCallback(<span class="function"><span class="params">node</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(node);</span><br><span class="line">&#125;, []);</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;/</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h4 id="ref-forwarding"><a href="#ref-forwarding" class="headerlink" title="ref forwarding"></a>ref forwarding</h4><ul>
<li>Ref forwarding lets components <strong>opt into</strong> exposing any child component’s ref as their own.</li>
<li>we can <em>customize the data that the component exposes to the outside</em> using <code>useImperativeHandle()</code> hook.</li>
<li><em>to access child node from a parent component</em> for <strong>triggering focus</strong> or <strong>measuring the size or position of a child dom</strong>.</li>
<li>it is useful in High Order Component, like assigning ref to input’s ref in a input component</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FancyInput</span>(<span class="params">props, ref</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> inputRef = useRef();</span><br><span class="line">  <span class="comment">// assign focus to inputRef</span></span><br><span class="line">  useImperativeHandle(ref, <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">	  <span class="attr">focus</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">	    inputRef.current.focus();</span><br><span class="line">	  &#125;</span><br><span class="line">  &#125;));</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;/</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line">FancyInput = forwardRef(FancyInput);</span><br><span class="line"></span><br><span class="line"><span class="comment">// this ref will be the input&#x27;s ref and can use the focus method</span></span><br><span class="line"><span class="keyword">const</span> ref = React.createRef();</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">FancyInput</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span> /&gt;</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="hooks"><a href="#hooks" class="headerlink" title="hooks"></a>hooks</h3><blockquote>
<ul>
<li>each component has an initial list of “memory cells”, when we call a hook like <code>useState()</code>, it reads the current cell or initializes it during the first render.</li>
<li>hook is a function which lets you to “hook into” <code>React state</code> and lifecycle features from function components.</li>
<li>use pure function as much as possible</li>
</ul>
</blockquote>
<ul>
<li><p><strong>useState()</strong>  keeps the local state in a function component, when we update a state variable, react replaces the state instead of merging it like <code>this.state()</code> in class component.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fun will only execute once when the component initialize</span></span><br><span class="line"><span class="keyword">const</span> [goodGet, goodSet] = React.useState(<span class="function">() =&gt;</span> fun(<span class="number">0</span>))</span><br><span class="line"><span class="comment">// fun will execute every time the component re-render</span></span><br><span class="line"><span class="keyword">const</span> [badGet, badSet] = React.useState(fun(<span class="number">1</span>))</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>useReducer()</strong>, store a complicated state, act like a small redux in a component.</p>
</li>
<li><p><strong>useRef()</strong>, store data, and the value returned remains valid throughout the entire life cycle</p>
</li>
<li><p><strong>useEffect() / useLayoutEffect()</strong></p>
<ul>
<li>one is called after the data is updated,  the another is called after the DOM is updated.</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// empty dependency array</span></span><br><span class="line">useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// mounted = componentDidMount and componentDidUpdate</span></span><br><span class="line">  <span class="keyword">return</span> fun() <span class="comment">// unmount = componentWillUnmount</span></span><br><span class="line">&#125;, [])</span><br><span class="line"><span class="comment">// specific dependency array</span></span><br><span class="line">useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//  updated</span></span><br><span class="line">  <span class="keyword">return</span> fun()<span class="comment">// componentWillUnmount and componentWillUpdate</span></span><br><span class="line">&#125;, [id])</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>useContext()</strong> accept a context object created by <code>createContext()</code> and returns the current context value.. it’s used when components of different nesting levels need to access the same data.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> value = useContext(MyContext)</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>createContext()</strong> accept a default value and returned a context object which has three properties. context will shallowly compare the properties of value to decide whether it should re-render.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MyContext = React.createContext(defaultValue)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>use useContext() with useReducer()</code> allows passing callbacks to children, avoiding the need to pass callbacks layer by layer.<br>create a context object for passing <code>dispatch</code> to children, so any child within the component can get the <code>dispatch</code> by <code>useContext</code>.</p>
</li>
<li><p><code>provider</code>: a react component, that allows to consume components to subscribe to context changes.</p>
</li>
<li><p><code>consumer</code>: a react component, that allows components to subscribe to context value</p>
</li>
<li><p><code>displayName</code>:  can be modified directly, and is showed in DevTools</p>
</li>
<li><p><code>contextType</code>: a property on a class component can be assigned a Context object</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt; MyContext.Provider value = &#123;<span class="comment">/* some value */</span> &#125; /&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">MyContext.Consumer</span>&gt;</span></span></span><br><span class="line"><span class="xml">  &#123;value =&gt; /*you can return a component and assign the value to it*/&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">MyContext.Consumer</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">MyContext.displayName = <span class="string">&#x27;MyDisplayName&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>useCallback() / useMemo()</strong> accept a function and an array of dependencies</p>
<ul>
<li>the former memorizes the received function, while the latter memorizes the value returned by the received function</li>
<li><code>useCallback()</code> allows to keep same callback after re-render, and is recommend to use as <code>callback ref</code> to get dom node after mound</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> measuredRef = useCallback(<span class="function"><span class="params">node</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(node);</span><br><span class="line">&#125;, []);</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">ref</span>=<span class="string">&#123;measuredRef&#125;</span>&gt;</span>Hello, world<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>custom hook</strong></p>
<ul>
<li>It allows for the sharing of stateful logic, rather than the state itself. Its purpose is to encapsulate reusable logic.</li>
</ul>
</li>
<li><p><strong>useTransition</strong></p>
</li>
<li><p><strong>useDeferredValue()</strong></p>
<ul>
<li>Using the staled value allows de-prioritizing the updating of a part of the UI. Deferring the re-rendering of that part serves as a performance optimization to prevent it from blocking the rest of the UI. this effect may similar to <code>debounce</code></li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// in this case, SlowList is running slowly and should update in response to user input. This indicates that SlowList is blocking user input and the rendering of this component.</span></span><br><span class="line"><span class="comment">// With the help of useDeferredValue, the dependencies are delayed to update, consequently causing SlowList to be delayed.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [text, setText] = useState(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> deferredText = useDeferredValue(text);</span><br><span class="line">  <span class="comment">// the re-call of SlowList depends on the deferredText</span></span><br><span class="line">  <span class="keyword">const</span> SlowList = useMemo(<span class="function"><span class="keyword">function</span> <span class="title">SlowList</span>(<span class="params">&#123; text &#125;</span>) </span>&#123;&#125;, [deferredText]);</span><br><span class="line">  <span class="built_in">console</span>.log(deferredText, text)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;text&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;e</span> =&gt;</span> setText(e.target.value)&#125; /&gt;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">SlowList</span>/&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>what’s happened?<ul>
<li><code>useDeferredValue</code> is realized by <code>useTransition</code> and <code>useEffect</code> under the react hood</li>
<li>input <code>1</code> =&gt; <code>setText</code> executes, <code>text</code> updates to <code>1</code> =&gt; render(<code>text</code> = 1, <code>deferredText</code> = “”) =&gt; the <code>callback</code> of <code>useEffect</code> executes =&gt; Update <code>deferredText</code> to match <code>text</code> =&gt; render(<code>text</code> = 1, <code>deferredText</code> = “”)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="difference-between-class-and-hook"><a href="#difference-between-class-and-hook" class="headerlink" title="difference between class and hook"></a>difference between class and hook</h3><ul>
<li><p><code>class component</code> is hard to reconstruct and decompose</p>
</li>
<li><p>compilation of <code>class component</code> will generate a lot of auxiliary functions</p>
</li>
<li><p><code>class component</code> require <code>this</code> when passing a function to a component</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// by a arrow-function. when the parent refresh, a new arrow function will be generated and the offspring will refresh, even the received props haven&#x27;t change</span></span><br><span class="line">&lt;button onClick=&#123;<span class="function">() =&gt;</span> <span class="built_in">this</span>.handleClick1()&#125;&gt; btn3 &lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// by bind. the side effect of this is same with the last one</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick1.bind(this)&#125;</span>&gt;</span> btn2 <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// to declare in the constructor, but it cannot pass parameters</span></span><br><span class="line"><span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123; <span class="built_in">this</span>.handleClick1 = <span class="built_in">this</span>.handleClick1.bind(<span class="built_in">this</span>)  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// by the static property of class, same with the last one</span></span><br><span class="line">handleClick3 = <span class="function">() =&gt;</span> &#123; &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>no <code>this</code> issues in function components, which helps to avoid problems with scope</p>
</li>
<li><p>code lesser with function component, but worse maintaining</p>
</li>
<li><p>doesn’t need to manage state and life cycle</p>
</li>
</ul>
<h3 id="lazy-loading"><a href="#lazy-loading" class="headerlink" title="lazy loading"></a>lazy loading</h3><ul>
<li>with <code>React.lazy</code> <code>Suspense</code> <code>import()</code>, we can lazy loading components and can do something in the fallback which will be triggered if the component failed to render</li>
<li>with webpack code splitting, each module loaded by <code>import()</code> will be split to separate files.</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> OtherComponent = React.lazy(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./OtherComponent&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Suspense</span> <span class="attr">fallback</span>=<span class="string">&#123;</span>&lt;<span class="attr">div</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;<span class="name">OtherComponent</span> /&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h4 id="key"><a href="#key" class="headerlink" title="key"></a>key</h4><p>when an array re-rendering, React will check each list item according to the last render. if an inexistent item of the last render is found in the current render, then react will create an new element. if an item of the last render is altered in the current render, then react will delete the old one and create a new one.</p>
<ul>
<li>The index of an item in an array is Lack of Stability, since it can be changed if items are added, removed, or reordered.</li>
<li>When items are added or removed from the list, React may need to re-render the reset items</li>
</ul>
<h3 id="shouldComponentUpdate-VS-pureComponent"><a href="#shouldComponentUpdate-VS-pureComponent" class="headerlink" title="shouldComponentUpdate VS pureComponent"></a>shouldComponentUpdate VS pureComponent</h3><ul>
<li>the former is in the life cycle of class components, by return a boolean to decide whether to continue update</li>
<li>the later doesn’t implement <code>shouldComponentUpdate</code>, but it can shallowly compare props and states</li>
<li>both of them are helpfully for avoiding needless re-render.</li>
</ul>
<h3 id="fiber"><a href="#fiber" class="headerlink" title="fiber"></a>fiber</h3><p><strong>before fiber, stack Reconciliation(differ)</strong></p>
<ul>
<li><strong>current tree and WIP(working-in-progress) tree</strong> react creates WIP(working-in-progress) tree based on the current tree which marks the current view. WIP tree is used to perform updates under the hood. maintaining the two trees during updating</li>
<li>React uses <code>DFS(depth first search)</code> to traverse two virtual dom tree, comparing the new with old props, the current tree with the WIP tree to find changed nodes, and then determines the nodes that need to be updated, this process called <strong>Reconciliation</strong>. The result of <code>Reconciliation</code> will be applied to the <code>current tree</code>.</li>
<li>during Reconciliation, the traversal process can cause performance problems as the DOM tree grows larger, and it cannot be stopped once it’s started. React occupies the resources of the browser until it’s finished, so when handling complex views, it can lead to blocking in the main thread, resulting in unresponsiveness in the page.</li>
</ul>
<p><strong>what is fiber</strong></p>
<ul>
<li>React saves references to the <code>return (parent)</code>, <code>sibling</code>, and <code>child</code> nodes, similar to a linked list. This more powerful representation of the virtual DOM tree is known as <code>Fiber(纤维)</code>. this feature enables React to memorize the work in progress,  and then pause and resume the <code>Reconciliation</code> process.</li>
</ul>
<p><strong>Fiber structure</strong></p>
<ul>
<li>React slices the process of Reconciliation into small pieces, this is called <code>time slicing</code>. It gives control to the browser to respond to user interactions and then takes back control to continue it’s work slice by slice(react =&gt; browser =&gt; react =&gt; browser ….). this mechanism of handling control is known as <strong>Fiber structure</strong>. in the <code>Fiber structure</code>, react gives control to browser to respond to user interactions at the right time, creating the perception of faster responsiveness.</li>
</ul>
<p><strong>fiber Reconciliation(differ)</strong></p>
<ul>
<li>In the <code>Fiber structure</code>, during <code>Reconciliation</code>, React saves the nodes that has <code>effect(require changes)</code> in the <code>effectTag</code> property of the fiber, and uses <code>nextEffect</code> to link those nodes in <code>linked list</code> structure.</li>
<li>After <code>Reconciliation</code>, React steps into the <strong>commit phase.</strong> During the <code>commit phase</code>, React applies all the <code>effects</code> to <code>WIP tree</code> in one go, and this process cannot be interrupted.</li>
</ul>
<p><strong>Concurrent Mode</strong></p>
<ul>
<li>with time slicing, react ables to bounce back and forth between multiple tasks, but doesn’t mean that those tasks are processing at the same time, rather it’s that one task can be paused while other more urgent task are seen to. once the more urgent one are done, we jump back the less urgent one, bringing with the updated information from the more urgent one.</li>
<li><code>useTransition</code>, this hook is used to wraps a less urgent update.</li>
</ul>
<p><strong>DFS(depth first search) 深度优先遍历</strong> a search algorithm used for traversing or searching tree or graph data structures.<br><strong>linked list 链表</strong>, a common data structure used to store a collection of elements, where each element is connected to the next one through a node. Each node contains two parts: data and a reference (or pointer) to the next node.</p>
<h3 id="controlled-and-uncontrolled"><a href="#controlled-and-uncontrolled" class="headerlink" title="controlled and uncontrolled"></a>controlled and uncontrolled</h3><ul>
<li><p>they are two different approaches to managing form inputs and components</p>
</li>
<li><p><code>controlled</code> is driven by <code>props</code> or <code>state</code>, following one-direction data flow. <code>uncontrolled</code> is driven by <code>dom</code> itself, and retrieves value by <code>ref</code>.</p>
   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> // uncontrolled</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">// controlled</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;state.value&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;handleChange&#125;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>controlled components</code> offer more control and are preferred in most cases, while <code>uncontrolled components</code> can be useful in certain scenarios. In many cases, a mix of <code>controlled</code> and <code>uncontrolled</code> components may be the best approach</p>
<ul>
<li>for form inputs where real-time validation, formatting or data manipulation is not required. <code>uncontrolled components</code> can minimize state management overhead and improve performance.</li>
<li>when integrating with external libraries like date pickers or rich text editors, using controlled components allows these libraries to manage their own state</li>
</ul>
</li>
</ul>
<h3 id="automatic-batching"><a href="#automatic-batching" class="headerlink" title="automatic batching"></a>automatic batching</h3><ul>
<li><p><code>batching update</code> happened when you had multiple state updates, and react will re-render once at the end of a function, not every time the <code>setState</code> is called. however, to choose is only occurred in a browser event handler. for now in the <code>version 18</code>, updates are batched automatically, regardless of what they’re wrapped by.</p>
</li>
<li><p><code>ReactDOM.flushSync()</code>, this method is used when you don’t want to apply <code>automatic batching</code>. updates in this method will be update immediately, and it’s a sync method, since we know that setState is a async method.</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">import</span> &#123; flushSync &#125; <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>; <span class="comment">// Note: react-dom, not react</span></span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">handleClick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">flushSync(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  setCounter(<span class="function"><span class="params">c</span> =&gt;</span> c + <span class="number">1</span>);</span><br><span class="line">&#125;);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Built-in-React-Components"><a href="#Built-in-React-Components" class="headerlink" title="Built-in React Components"></a>Built-in React Components</h3><h4 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// explicitly writing form  is required when pass key to a `Fragment`</span></span><br><span class="line">&lt;Fragment key=&#123;yourKey&#125;&gt;...&lt;/Fragment&gt;.</span><br><span class="line"></span><br><span class="line">&lt;&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">OneChild</span> /&gt;</span></span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">AnotherChild</span> /&gt;</span></span></span><br><span class="line">&lt;/&gt;</span><br></pre></td></tr></table></figure>

<h4 id="Profiler"><a href="#Profiler" class="headerlink" title="Profiler"></a>Profiler</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// measure rendering performance of a React tree. but adds some additional overhead, so it is disabled in the production build by default</span></span><br><span class="line">&lt;Profiler id=<span class="string">&quot;Sidebar&quot;</span> onRender=&#123;<span class="function">(<span class="params">id, phase, actualDuration, baseDuration, startTime, commitTime</span>) =&gt;</span> (&#123;&#125;)&#125;&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Sidebar</span> /&gt;</span></span></span><br><span class="line">&lt;/Profiler&gt;</span><br></pre></td></tr></table></figure>

<h4 id="Suspense-dynamic-import-lazy-loading"><a href="#Suspense-dynamic-import-lazy-loading" class="headerlink" title="Suspense + dynamic import + lazy loading"></a>Suspense + dynamic import + lazy loading</h4><ul>
<li><code>lazy loading</code> should always be declared at the top level of modules.</li>
<li>Data fetching, Lazy-loading by <code>lazy</code></li>
<li><code>fallback</code> will be used if any of <code>the children</code> suspend while waiting for some data. nesting multiple <code>Suspense</code> components can create a loading sequence for revealing a component as it loads.</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MarkdownPreview = lazy(<span class="function">() =&gt;</span> delayForDemo(<span class="keyword">import</span>(<span class="string">&#x27;./MarkdownPreview.js&#x27;</span>)));</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">MarkdownEditor</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Suspense</span> <span class="attr">fallback</span>=<span class="string">&#123;</span>&lt;<span class="attr">Loading</span> /&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Preview<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">MarkdownPreview</span>/&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br></pre></td></tr></table></figure>

<h4 id="StrictMode"><a href="#StrictMode" class="headerlink" title="StrictMode"></a>StrictMode</h4><ul>
<li>enables additional checks and warnings for its descendants.  it‘s used in the DEV mode only.</li>
<li>under <code>StrictMode</code>, setState updaters run twice.</li>
</ul>
<h3 id="others-1"><a href="#others-1" class="headerlink" title="others"></a>others</h3><ul>
<li><p>refresh page by router according to hash value</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.props.history.replace(&#123; <span class="attr">pathname</span>: <span class="built_in">this</span>.props.location.pathname, <span class="attr">search</span>: <span class="string">`id=<span class="subst">$&#123;id&#125;</span>&amp;api=<span class="subst">$&#123;<span class="built_in">window</span>.location.hash.split(<span class="string">&#x27;&amp;&#x27;</span>)[<span class="number">1</span>].split(<span class="string">&#x27;=&#x27;</span>)[<span class="number">1</span>]&#125;</span>`</span> &#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>the root element may not need a name</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;inputEl&#125;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="redux"><a href="#redux" class="headerlink" title="redux"></a>redux</h3><h4 id="concept"><a href="#concept" class="headerlink" title="concept"></a>concept</h4><p>A(change) –&gt; B(send an <code>action</code> to <code>store</code>) –&gt; C(<code>store</code> dispatch the action to a <code>reducer</code>) –&gt; D(the <code>reducer</code> return a new state to <code>store</code>) –&gt; E(<code>state</code> changed)  –&gt; G(execute <code>listeners</code>)</p>
<ul>
<li><strong>store</strong>  a container created by <code>createStore()</code>, where data is changed and saved.</li>
<li><strong>state</strong> data, an object</li>
<li><strong>action</strong> An object include a required <code>type</code> property and other business related properties. The different values of the <code>type</code> determine the number of actions that a store can perform.</li>
<li><strong>reducer</strong> a function, receive an <code>action</code> ,and return a new <code>state</code>. it automatically triggered by <code>store.dispatch()</code><br><code>Reducers</code> should be as the parameter pass to the <code>createStore()</code> when initialize the <code>store</code>.</li>
</ul>
<h4 id="Redux-Methods"><a href="#Redux-Methods" class="headerlink" title="Redux Methods"></a>Redux Methods</h4><ul>
<li><p><code>createStore()</code>, <code>reducers</code> as parameter is required, an initial state, the third argument is enhancer like <code>middleware</code></p>
</li>
<li><p><code>provider</code> allow the redux hooks and connect to components</p>
</li>
<li><p><code>store.getState()</code> get the present state</p>
</li>
<li><p><code>store.dispatch()</code> sending an action to reducer</p>
</li>
<li><p><code>store.replaceReducer()</code> Replaces the reducer currently used by the store.</p>
</li>
<li><p><code>combineReducers()</code> organize your reducers to manage their own slices of state. accept an object whose values are different reducing functions and turn it into a single reducing function you can pass to <code>createStore</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">combineReducers(&#123; <span class="attr">todo</span>: myTodoReducer, <span class="attr">counter</span>: myCounterReducer &#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>bindActionCreators</code> is wrap action into dispatch</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type actionCreator = <span class="function">(<span class="params">payLoad: any</span>) =&gt;</span> &#123;...&#123;<span class="attr">type</span>: string &#125;, ...payload&#125;</span><br><span class="line">type dispatchAction = <span class="function">(<span class="params">payLoad: any</span>) =&gt;</span> dispatch(actionCreator(payLoad))</span><br><span class="line">(actionCreators: actionCreator | actionCreator[], <span class="attr">dispatch</span>: <span class="built_in">Function</span>) =&gt; dispatchAction | dispatchAction[]</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>store.subscribe()</code> receives an listeners function and return a function in which you can disengage the listener.</p>
</li>
<li><p><code>connect</code> return a function which like a <code>HOC</code> accepts a component and wrap it to subscribe store’s updates and able to dispatch actions.</p>
<ul>
<li><code>how it works?</code> with <code>Provider</code> component provided by redux we can wrap a component and get the component’s context and children,  then any nested components can access <code>store</code> with <code>Hooks</code> and <code>connect</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(mapStateToProps: mapStateToProps, <span class="attr">mapDispatchToProps</span>: mapDispatchToProps, <span class="attr">mergeProps</span>: mergeProps, options) =&gt; (<span class="function">(<span class="params">component</span>) =&gt;</span> connectedComponent)</span><br><span class="line"></span><br><span class="line"><span class="comment">//  combine state and component&#x27;s props and pass to the component, if this argument is passed to the components, then mapStateToProps will be executed as every time the store and own-props are updated.</span></span><br><span class="line">type mapStateToProps = <span class="function">(<span class="params">state: object,  ownProps?: object</span>) =&gt;</span> stateProps</span><br><span class="line"><span class="comment">// wrap actions as a part of props pass to the component</span></span><br><span class="line">type mapDispatchToProps = <span class="function">(<span class="params">dispatch: <span class="built_in">Function</span>,  props?: object</span>) =&gt;</span> dispatchProps</span><br><span class="line"><span class="comment">// return an object as a result of mapStateToProps and mapDispatchToProps</span></span><br><span class="line">type mergeProps = <span class="function">(<span class="params">stateProps, dispatchProps, ownProps</span>) =&gt;</span> mapStateToProps &amp; mapDispatchToProps</span><br><span class="line"></span><br><span class="line">type stateProps = any</span><br><span class="line"></span><br><span class="line">interface dispatchProps &#123;</span><br><span class="line">  <span class="attr">dispatchPlainObject</span>: <span class="function">() =&gt;</span> dispatch(action)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>middleware</code> is used to inject a third-party in the redux processing, allow you to do sth (like logging, crash reporting, talking to an asynchronous API, routing, and more) after an action is dispatched and before a reducer update the state.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(getState: store.getState, action, <span class="attr">next</span>: <span class="function">(<span class="params">action</span>) =&gt;</span> <span class="keyword">void</span>) =&gt; <span class="keyword">void</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>action =&gt; middleware =&gt; reducer =&gt; state</code></li>
<li><code>next</code> is used to pass <code>action</code> to the next middleware. you can pass the current action to continue the middleware chain or pass another action.</li>
<li><code>middleware chin</code>: an action can have an array of middleware that is linked by <code>next</code>.<ul>
<li><strong>tips:</strong> if <code>next</code> is used in a middleware for passing another action, then that action will be directly to the reducer and will not go through its own middleware chain</li>
</ul>
</li>
<li>use <code>dispatch</code> inside a middleware will stop current middleware chain and start another middleware chin.</li>
<li>it is not different, either use <code>dispatch</code>, or <code>next</code>, or do nothing to stop middleware chain.</li>
</ul>
</li>
</ul>
<h3 id="redux-toolkit"><a href="#redux-toolkit" class="headerlink" title="redux-toolkit"></a>redux-toolkit</h3><ul>
<li>core api<ul>
<li>createAction，createReducer</li>
<li>createSlice：including <code>createAction</code> and <code>createReducer</code></li>
<li>PayloadAction：<code>ts</code> 泛型，用以声明 <code>action.payload</code></li>
</ul>
</li>
</ul>
<blockquote>
<p>createAsyncThunk</p>
</blockquote>
<p>accepts <strong>a Redux action type string</strong> and <strong>a callback function that should return a promise</strong>. return <code>a standard Redux thunk action creator</code></p>
<h2 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h2><p>2x: Object.defineProperty<br>3x: Proxy, setter and getter</p>
<h2 id="web3"><a href="#web3" class="headerlink" title="web3"></a>web3</h2><p>window.ethereum (an EIP-1193 compliant provider)<br>Web3.givenProvider</p>
<h2 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h2><blockquote>
<p>module building, browser compatibility, code compressing, code splitting, lazy loading</p>
</blockquote>
<h3 id="building-process"><a href="#building-process" class="headerlink" title="building process"></a>building process</h3><ol>
<li>generate a config from the <code>webpack.config.js</code> and the command line.</li>
<li>use <code>compiler</code> module to create a <code>compilation</code> instance which has access to all modules and their dependencies. execute the <code>compiler.run()</code> to start working. <code>compiler</code> and <code>compilation</code> are the heart of webpack, both of them extend from <code>tapable</code>.</li>
<li>analysis process is started from the <code>entry</code> file. use <code>acron parser</code> to generates AST(Abstract Syntax Tree / 抽象语法树) for the <code>entry</code> file.</li>
<li>traverse through entire AST to create a dependency graph. at this stage, if webpack find any matched <code>rules</code> for <code>loader</code>s, the loaders will convert those codes(e.g. css files) into js, and then <code>Parser</code> parses them into AST.</li>
<li>this process will be repeatedly executed for the each dependency, to recursive traverse.</li>
<li>bundle all the files.</li>
<li>in the above process<ol>
<li>webpack compiles the different types of file to js file by <code>loader</code>s<ul>
<li><code>loader</code> is responsible for file converting. every file type can have more than one loader, those loaders will be invoked with method chaining  in order. so the output of a loader will be the arguments of the next loader.</li>
</ul>
</li>
<li><code>compiler</code> will throw some hooks when webpack starts/stops, emit assets, watch mode etc. those events can be listened by <code>plugin</code> and allows <code>plugin</code> to intervene the result of output.<ul>
<li><code>plugin</code> can extends features. listen events sended by compiler allows a plugin to effect the result.</li>
</ul>
</li>
</ol>
</li>
</ol>
<h3 id="optimization"><a href="#optimization" class="headerlink" title="optimization"></a>optimization</h3><ul>
<li><code>tree shaking</code></li>
<li><code>compress code</code> by some plugins, like <code>terser</code>, <code>css minimize</code></li>
<li><code>code splitting</code>, use <code>import()</code> to split code into multiple chunk and <code>lazy-loading</code> them. <code>import()</code> can cooperate with <code>suspense</code> feature in react.</li>
</ul>
<h3 id="boost-build-time"><a href="#boost-build-time" class="headerlink" title="boost build time"></a>boost build time</h3><ul>
<li>webpack cache strategies</li>
<li>get precise time by <code>speed-measure-webpack-plugin</code>, like how long the engine spends in each plugin / loader</li>
<li>save time from each plugin or loader<ul>
<li>ts-loader, use <code>happyPackMode</code> or <code>transpileOnly</code> to turn off type checking. the former will implicitly sets <code>transpileOnly: true</code> and will not reports syntactic errors. it is usually used with <code>happypack</code>.</li>
<li><code>fork-ts-checker-webpack-plugin</code> works for ts type checking in a separate process which runs in parallel with webpack</li>
</ul>
</li>
</ul>
<h3 id="tree-shaking"><a href="#tree-shaking" class="headerlink" title="tree shaking"></a>tree shaking</h3><ul>
<li><p>after checking <code>import and export</code>, <code>tree shaking</code> will remove the modules which is imported but doesn’t be used. from this point, what method do we use to import file is critical, and we can know <code>tree shaking</code> only supports <code>ES module</code>.</p>
</li>
<li><p>to import the specific modules instead of the whole library</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Import everything (NOT TREE-SHAKABLE)</span></span><br><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CAN BE TREE SHAKEN</span></span><br><span class="line"><span class="keyword">import</span> &#123; debounce &#125; <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> debounce <span class="keyword">from</span> <span class="string">&#x27;lodash/lib/debounce&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>side effect</code> refer to a function will effect the variables or scope outside the function</p>
</li>
<li><p>however, the border between <code>used</code> and <code>not used</code> is not clean, some modules are started to work when it is imported. since <code>object</code> is reference type, which means that if a function’s arguments are object, then any changes on we made on it will be easily effect the data outside the function. so there has a property <code>sideEffects</code> in the <code>package.json</code> to tell <code>webpack</code> whether should be <code>tree shaking</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// all the modules have/haven&#x27;t side effects, and then can&#x27;t/can be tree shaking</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;sideEffects&quot;</span>: <span class="literal">true</span>/<span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// give webpack an array with side effects</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;sideEffects&quot;</span>: [</span><br><span class="line">	<span class="string">&quot;./src/file1.js&quot;</span>,</span><br><span class="line">	<span class="string">&quot;./src/file2.js&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="module-federation"><a href="#module-federation" class="headerlink" title="module federation"></a>module federation</h3><p>to expose some of our components to the outside, and therefor which can be used in other projects.<br>this feature is considered as an idea of micro-frontend</p>
<h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><p>http: HTTP &gt; TCP &gt; IP &gt; MAC<br>https: HTTP(application) &gt; SSL/TSL(application) &gt; TCP(transport) &gt; IP(internet) &gt; MAC(link)<br>http2: HTTP &gt; HPack and Stream&gt; SSL/TSL &gt; TCP &gt; IP &gt; MAC</p>
<ul>
<li><p><strong>http vs https</strong></p>
<ul>
<li><code>http</code> requests are sent in plaintext. HTTPS adds <code>SSL/TLS protocol</code> between <code>TCP</code> and <code>HTTP</code> for encrypting data</li>
<li><code>http</code> uses <code>80 port</code> as default, while <code>https</code> uses <code>403</code> as default</li>
<li>friendly to SEO. Search engines like Google prefer HTTPS websites</li>
<li>HTTPS is seen as a trust signal which will be indicates by browser</li>
</ul>
</li>
<li><p><strong>three-way handshake</strong> is used to establish TCP connection, to ensure that the service and the client both can send and receive data</p>
<ul>
<li>The client sends a SYN packet (SYN = synchronize) to the server, and specifying its initial sequence number. (client can send and server can receive).</li>
<li>the server responds with a packet containing both SYN and ACK(Acknowledgement Number) flags. (server can send)</li>
<li>the client sends back an ACK packet. (client can receive).</li>
<li><strong>what it’s used for</strong><ul>
<li>prevent historical connection</li>
</ul>
</li>
</ul>
</li>
<li><p>127.0.0.1, localhost, 0.0.0.0</p>
<ul>
<li>localhost is domain, equal to 127.0.0.1 which is <code>loopback address(回环地址)</code></li>
</ul>
</li>
<li><p><code>URL</code></p>
<ul>
<li>Reserved characters ： <code>: / ; ? #</code></li>
<li><code>encodeURI</code> <code>decodeURI</code>, don’t encode reserved characters</li>
<li><code>encodeURIComponent</code> <code>decodeURIComponent</code> encode reserved characters</li>
</ul>
</li>
</ul>
<h3 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h3><p><code>same origin policy</code>, requires same <code>protocol</code>, <code>domain</code> and <code>port</code></p>
<h3 id="http-versions"><a href="#http-versions" class="headerlink" title="http versions"></a>http versions</h3><ul>
<li>http1.0</li>
<li>http1.1<ul>
<li><code>connection:keep-alive</code> feature allows for long-lasting connections</li>
<li>supports <code>pipeline transport</code>(but it’s not allowed in browsers)</li>
<li>It compresses only <code>body</code>, excluding <code>header</code>.</li>
<li>the server responds to requests in the order they were received, a delay in one request can cause subsequent requests to be blocked. This issue is known as <code>head-of-line blocking(队头阻塞)</code>  </li>
</ul>
</li>
<li>http2.0<ul>
<li>Compress both the header and body. Both the client and the server maintain a dynamic table of header information. Every header field is stored in this table and assigned an index number. For headers with the same name, only the index number will be sent. this called <code>HPACK</code></li>
<li>uses binary format, reducing the step of transforming requests into binary form</li>
<li>introduces <code>Stream</code> concept, allowing multiple requests and responses to be sent and received concurrently within a single TCP connection.<ul>
<li>multiple streams exist in one tcp connection, and own a stream-id as an identifier. a full request (request and correspondent response) can be split in frames and then sent with the same stream identifier.</li>
<li>a stream is initiated when client or server sends bytes.</li>
</ul>
</li>
<li>server push. since the server can create stream</li>
<li><code>Head-of-line blocking</code> still exists in the TCP layer. TCP is a byte-oriented protocol, and data is only sent to the application layer when the received bytes are complete. Packet loss triggers TCP to resend the missing packets, which can block all the requests.</li>
</ul>
</li>
<li>http3.0</li>
</ul>
<h3 id="methods"><a href="#methods" class="headerlink" title="methods"></a>methods</h3><ul>
<li><code>post | put | delete</code> contain request body for saving data.</li>
<li><code>get</code>: retrieve data, safe and can be cached</li>
<li><code>post</code>: creating new resources, submitting form data, or sending large amounts of data that cannot be sent in a URL query string.</li>
<li><code>put</code>: updating existing resources</li>
</ul>
<h3 id="headers"><a href="#headers" class="headerlink" title="headers"></a>headers</h3><ul>
<li><p><code>Content-Disposition</code>: a response header which is indicating if the content is expected to be displayed inline in the browser,or as an attachment to downloaded and saved locally.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// inline or attachment</span></span><br><span class="line">res.set(<span class="string">&#x27;Content-Disposition&#x27;</span>, <span class="string">&#x27;attachment; filename=foo.fdf&#x27;</span>);</span><br><span class="line">res.send(_res)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="http-cache"><a href="#http-cache" class="headerlink" title="http cache"></a>http cache</h3><p><strong>memory cache, disk cache</strong></p>
<ul>
<li>cache use priority: Service Worker -&gt; Memory Cache -&gt; Disk Cache -&gt; Push Cache</li>
<li>memory cache: fast but limited in time; cache is deleted when the browser is closed.</li>
<li>disk cache: need I/O operations during read and write</li>
</ul>
<p><strong>strong cache</strong></p>
<ul>
<li><code>headers</code>, priority: <code>pragma</code> &lt;= <code>cache-control</code> &lt;= <code>expires</code><ul>
<li><code>Expires</code>, an absolute date which is the expire date of the current resource</li>
<li><code>Cache-Control</code><ul>
<li><code>max-age:5000</code>, Specifies the maximum amount of time in seconds</li>
<li><code>no-store</code>, <code>strong cache</code> is not allowed</li>
<li><code>no-cache</code>, submit a request to the server for validation before using <code>strong cache</code></li>
<li><code>private</code></li>
<li><code>public</code></li>
</ul>
</li>
<li><code>Pragma: no-cache</code>, for compatibility with older HTTP/1.0 caches.</li>
</ul>
</li>
</ul>
<p><strong>negotiated cache</strong></p>
<ul>
<li><code>headers</code><ul>
<li><code>Last-Modified</code> / <code>Last-Modified-Since</code>, <code>ETag</code> / <code>If-None-Match</code><ul>
<li><code>Last-Modified</code> set by the server, represents the last modified date of the current resources</li>
<li><code>ETag</code>, set by the server, a hash code represents the current resource</li>
<li><code>Last-Modified-Since / if-none-match</code> sent by the client with the value of <code>Last-Modified / ETag</code> from the previous response. The server compares the values in the request  with the current values. If they match, the server responds with <code>304 Not Modified.</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><code>client scenarios</code></p>
<ul>
<li>press <code>f5</code> to refresh: sets <code>Cache-Control:max-age:0;</code>, means the cache is invalid</li>
<li><code>ctrl + f5</code> force to refresh, sets <code>Cache-Control:no-cache</code></li>
</ul>
<h3 id="code"><a href="#code" class="headerlink" title="code"></a>code</h3><ul>
<li>1XX- Informational</li>
<li>2XX- Success</li>
<li>3XX - Redirection<ul>
<li>301 vs 302, 301 is permanent redirection, while 302 is temporary redirection. For permanent redirects, the browser caches the redirection location, so the cached location is used the next time.</li>
</ul>
</li>
<li>4XX - Client Error, 400 Bad Request, 401 Unauthorized, 404 Not Found</li>
<li>5XX - Server Error, 500 Internal Server Error, 502 Bad Gateway, 503 Service Unavailable</li>
</ul>
<h3 id="https-optimization"><a href="#https-optimization" class="headerlink" title="https optimization"></a>https optimization</h3><ul>
<li>reduce the number of request<ul>
<li>use http cache</li>
<li>combine small and light requests, like small images</li>
</ul>
</li>
<li>use compress as needed<ul>
<li><code>lossless compression</code>, <code>Accept-Encoding: gzip, deflate</code> <code>Content-Encoding: gzip</code></li>
<li><code>lossy compression</code>, <code>Accept: audio/*; q=0.2, audio/basic</code>, q refer to the number of quality</li>
</ul>
</li>
</ul>
<h2 id="real-time-communication"><a href="#real-time-communication" class="headerlink" title="real-time communication"></a>real-time communication</h2><h3 id="SSE"><a href="#SSE" class="headerlink" title="SSE"></a>SSE</h3><p>http long-lasting connection<br>plain text only<br>one-way communication, server to client<br>standard HTTP connection</p>
<h3 id="Websocket"><a href="#Websocket" class="headerlink" title="Websocket"></a>Websocket</h3><p>plain text and binary format<br>bidirectional communication, server to client and client to server<br>use HTTP handshake, and then upgrade to <code>ws</code> protocol</p>
<h2 id="long-polling"><a href="#long-polling" class="headerlink" title="long-polling"></a>long-polling</h2><p>extending the time of timeout, and the server holds the request open until it has new data to send to the client or until a timeout occurs</p>
<h2 id="NPM"><a href="#NPM" class="headerlink" title="NPM"></a>NPM</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">npm version patch // v1.0.1</span><br><span class="line"></span><br><span class="line">npm version prepatch // v1.0.2-0</span><br><span class="line"></span><br><span class="line">npm version minor // v1.1.0</span><br><span class="line"></span><br><span class="line">npm version major // v2.0.0</span><br><span class="line"></span><br><span class="line">npm publish --access public</span><br></pre></td></tr></table></figure>

<ul>
<li>control the files of a <strong>package</strong><ul>
<li>define the <code>file</code> field in the <code>package.json</code></li>
<li>use <code>.npmignore</code> which is used as same as <code>gitignore</code></li>
</ul>
</li>
</ul>
<h2 id="Vscode"><a href="#Vscode" class="headerlink" title="Vscode"></a>Vscode</h2><p>vscode setting</p>
<p><a target="_blank" rel="noopener" href="https://github.com/DavidAnson/markdownlint/blob/main/doc/Rules.md#md005">markdown lint config</a></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">&quot;security.workspace.trust.untrustedFiles&quot;</span>: <span class="string">&quot;open&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;editor.tabCompletion&quot;</span>: <span class="string">&quot;on&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;editor.insertSpaces&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">	<span class="attr">&quot;editor.tabSize&quot;</span>: <span class="number">4</span>,</span><br><span class="line">	<span class="attr">&quot;editor.detectIndentation&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">	<span class="attr">&quot;files.autoSave&quot;</span>: <span class="string">&quot;onFocusChange&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;php.validate.executablePath&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;editor.defaultFormatter&quot;</span>: <span class="string">&quot;esbenp.prettier-vscode&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;editor.formatOnSave&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">	<span class="attr">&quot;prettier.jsxSingleQuote&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">	<span class="attr">&quot;prettier.semi&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">	<span class="attr">&quot;prettier.useTabs&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">	<span class="attr">&quot;prettier.tabWidth&quot;</span>: <span class="number">4</span>,</span><br><span class="line">	<span class="attr">&quot;prettier.jsxBracketSameLine&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">	<span class="attr">&quot;prettier.printWidth&quot;</span>: <span class="number">200</span>,</span><br><span class="line">	<span class="attr">&quot;workbench.colorTheme&quot;</span>: <span class="string">&quot;Blackboard&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;javascript.updateImportsOnFileMove.enabled&quot;</span>: <span class="string">&quot;always&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;leek-fund.statusBarStock&quot;</span>: [<span class="string">&quot;sh000001&quot;</span>],</span><br><span class="line">	<span class="attr">&quot;settingsSync.ignoredExtensions&quot;</span>: [],</span><br><span class="line">	<span class="attr">&quot;markdown-preview-enhanced.previewTheme&quot;</span>: <span class="string">&quot;vue.css&quot;</span>,</span><br><span class="line">	<span class="attr">&quot;[markdown]&quot;</span>: &#123;</span><br><span class="line">		<span class="attr">&quot;editor.defaultFormatter&quot;</span>: <span class="string">&quot;yzhang.markdown-all-in-one&quot;</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">&quot;markdownlint.config&quot;</span>: &#123;</span><br><span class="line">		<span class="attr">&quot;MD025&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">		<span class="attr">&quot;MD007&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">		<span class="attr">&quot;MD010&quot;</span>: <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>short key</th>
<th>function</th>
</tr>
</thead>
<tbody><tr>
<td>Ctrl+Shift+[</td>
<td>折叠</td>
</tr>
<tr>
<td>Ctrl+Shift+]</td>
<td>展开</td>
</tr>
<tr>
<td>ctrl+d</td>
<td>选中单词</td>
</tr>
<tr>
<td>alt+shift+鼠标点选</td>
<td>多个位置</td>
</tr>
<tr>
<td>alt +鼠标点选</td>
<td>选中</td>
</tr>
<tr>
<td>alt + z</td>
<td>word break</td>
</tr>
<tr>
<td>ctrl + shift + L</td>
<td>pitch on the same words simultaneously</td>
</tr>
<tr>
<td>ctrl + shift + p</td>
<td>show command menu</td>
</tr>
<tr>
<td>Setting json</td>
<td>C:\Users\tong\AppData\Roaming\Code\User</td>
</tr>
<tr>
<td>Line break</td>
<td>“files.eol”: “\n”</td>
</tr>
<tr>
<td>ctrl + g</td>
<td>go to a specif line</td>
</tr>
</tbody></table>
<h2 id="search-patterns"><a href="#search-patterns" class="headerlink" title="search patterns"></a>search patterns</h2><table>
<thead>
<tr>
<th align="center">symbol</th>
<th align="left">example</th>
<th align="left">explain</th>
</tr>
</thead>
<tbody><tr>
<td align="center">OR或者管道符号（竖线）</td>
<td align="left">x OR y</td>
<td align="left">返回x或者y的信息，或者和两者都相关的信息</td>
</tr>
<tr>
<td align="center">AND</td>
<td align="left">x AND y</td>
<td align="left">返回和两者都相关的信息</td>
</tr>
<tr>
<td align="center">- 短横线</td>
<td align="left">x -y</td>
<td align="left">排除一个相似的容易造成误导的词语，返回x相关的信息而不是y，注意: 符号-和y之间没有空格</td>
</tr>
<tr>
<td align="center">* 通配符</td>
<td align="left">x * y</td>
<td align="left">匹配任何信息</td>
</tr>
<tr>
<td align="center">() 括号</td>
<td align="left">(x OR y) -z</td>
<td align="left">将多个款项和符号组合搜索</td>
</tr>
<tr>
<td align="center">$ 美元符号</td>
<td align="left">iphone $2000</td>
<td align="left">价格搜索</td>
</tr>
<tr>
<td align="center">define:</td>
<td align="left">define:china</td>
<td align="left">显示谷歌内置的词典，以卡片形式展现</td>
</tr>
<tr>
<td align="center">cache:</td>
<td align="left">cache:<a target="_blank" rel="noopener" href="https://github.com/">https://github.com</a></td>
<td align="left">返回该页面最新缓存版本</td>
</tr>
<tr>
<td align="center">filetype: 或者 ext:</td>
<td align="left">个人简历 filetype:pdf</td>
<td align="left">返回符合指定的文件类型的信息</td>
</tr>
<tr>
<td align="center">site:</td>
<td align="left">js site:github.com</td>
<td align="left">将搜索限制在某个指定的网站</td>
</tr>
<tr>
<td align="center">related:</td>
<td align="left">related:github.com</td>
<td align="left">查找和给定域名相关的站点</td>
</tr>
<tr>
<td align="center">intitle:</td>
<td align="left">intitle:github</td>
<td align="left">返回所有标题中包含“github”的信息</td>
</tr>
<tr>
<td align="center">allintitle:</td>
<td align="left">allintitle:github js</td>
<td align="left">和intitle类似，返回标题中包含所有单词的信息</td>
</tr>
<tr>
<td align="center">inurl:</td>
<td align="left">inurl:github</td>
<td align="left">和intitle类似，不同的是匹配的是url而不是标题</td>
</tr>
<tr>
<td align="center">allinurl</td>
<td align="left">allinurl:github js</td>
<td align="left">同上</td>
</tr>
<tr>
<td align="center">intext:</td>
<td align="left">intext:github</td>
<td align="left">和intitle类似，不同的是匹配的是内容而不是标题</td>
</tr>
<tr>
<td align="center">allintext:</td>
<td align="left">allintext:github js</td>
<td align="left">同上</td>
</tr>
<tr>
<td align="center">AROUND(X)</td>
<td align="left">apple AROUND（4）iphone</td>
<td align="left">间隔限制，单词“apple”和“iphone”必须出现在内容中，并且相隔不超过四个单词。</td>
</tr>
<tr>
<td align="center">weather:</td>
<td align="left">weather:san francisco</td>
<td align="left">查找指定位置的天气</td>
</tr>
<tr>
<td align="center">stocks:</td>
<td align="left">stocks:aapl</td>
<td align="left">查找指定的股票信息</td>
</tr>
<tr>
<td align="center">map:</td>
<td align="left">map:silicon valley</td>
<td align="left">地图搜索</td>
</tr>
<tr>
<td align="center">movie:</td>
<td align="left">movie:steve jobs</td>
<td align="left">电影搜索</td>
</tr>
<tr>
<td align="center">in</td>
<td align="left">$329 in GBP</td>
<td align="left">单位转换，前者向后者转换</td>
</tr>
<tr>
<td align="center">source:</td>
<td align="left">apple source:the_verge</td>
<td align="left">在google News中查找来自某个来源的新</td>
</tr>
</tbody></table>
<h2 id="terms"><a href="#terms" class="headerlink" title="terms"></a>terms</h2><table>
<thead>
<tr>
<th>en</th>
<th>ch</th>
</tr>
</thead>
<tbody><tr>
<td>closed testing</td>
<td>精密测试</td>
</tr>
</tbody></table>
<h2 id="records"><a href="#records" class="headerlink" title="records"></a>records</h2><h3 id="2023-7-19"><a href="#2023-7-19" class="headerlink" title="2023/7/19"></a>2023/7/19</h3><ul>
<li>CSS filters can form <code>stacking context</code></li>
<li>the property <code>hidden</code> of input does not work in Safari</li>
</ul>
</div></div><link rel="stylesheet" href="/css/partial/footer.css"><div class="footer"><p><span>Copyright © 2017 - 2023</span><a target="_blank" rel="noopener" href="http://www.beian.miit.gov.cn/">蜀ICP备19024124号</a></p><p><i class="iconfont iconchakan"><span>本站总访问量</span><span id="busuanzi_container_site_pv">  <span id="busuanzi_value_site_pv"></span> </span></i><i class="iconfont iconabout"><span>本站访客数</span><span id="busuanzi_container_site_uv">  <span id="busuanzi_value_site_uv"></span> </span></i></p></div></div></div><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></body></html>